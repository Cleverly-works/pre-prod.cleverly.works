"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9785],{46929:function(e,n,t){t.d(n,{r:function(){return o}});var i=t(85893),r=t(45697),a=t(95103),o=function(e){var n=e.errors,t=e.name,r=e.onChange,o=e.options,s=e.register;return(0,i.jsx)(a.Z,{errors:n,name:t,onChange:r,options:o,register:s})};o.propTypes={errors:r.object.isRequired,name:r.string,onChange:r.func,options:r.array.isRequired,register:r.func.isRequired},o.defaultProps={name:"status"}},91272:function(e,n,t){t.d(n,{t:function(){return l}});var i=t(85893),r=t(67294),a=t(45697),o=t(11163),s=t(46003),u=t(16540),l=(0,r.forwardRef)(function(e,n){var t=e.columns,a=e.history,l=e.initialSort,c=e.loading,d=e.meta,p=e.paginationSize,m=e.refetch,y=e.rowClick,f=e.rows,g=e.xeroPageSize,v=(0,o.useRouter)(),h=v.query,x=void 0===h?{}:h,b=(0,r.useState)(parseInt(null==x?void 0:x.page,10)||1),Z=b[0],j=b[1],S=(0,r.useState)(g||s.C1.paginationSize),_=S[0],q=S[1];l||(l={item:"createdAt",order:"desc"});var T=(0,r.useState)({item:l.item,order:l.order}),I=T[0],$=T[1],C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=v.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(i)},w=function(){$({item:l.item,order:l.order}),j(1);var e=C();v.push(e),q(g||s.C1.paginationSize)};(0,r.useImperativeHandle)(n,function(){return{currentPage:Z,pageSize:_,sort:I,resetPagination:function(){w()}}});var k=function(e){var n=C(e);a&&v.push(n),j(e),!a&&m&&m()},P=function(e){e!==s.C1.paginationSize&&(q(e),m&&m())},F=function(e){var n;$({item:e.item,order:e.order}),m&&m()};return(0,i.jsx)(u.Z,{columns:t,loading:c,paginationSize:p,pagination:d&&!0,paginationProps:d&&{currentPage:Z,onPageChange:k,onPageSizeChange:P,pageCount:Math.ceil(d.aggregate.totalCount/_),perPage:_},rowClick:y,rows:f,sort:I,setSort:F})});l.propTypes={columns:a.array.isRequired,history:a.bool,initialSort:a.object,loading:a.bool,meta:a.object,refetch:a.func,rowClick:a.func,rows:a.array.isRequired},l.defaultProps={history:!0,loading:!0,paginationSize:!1}},23390:function(e,n,t){t.d(n,{R:function(){return v}});var i=t(26042),r=t(69396),a=t(85893),o=t(45697),s=t(6812),u=t(42575),l=t(68956),c=t(74297),d=t(25742),p=t(70616),m=t(91272),y=t(20705),f=t(64872),g={item:"name",order:"asc"},v=function(e){var n=e.entity,t=e.entityId,o=e.refetchCompliance,v=e.parentId,h=e.type,x=(0,f.a)(),b=(0,y.x)({filters:{},initialSort:g}),Z=b.initialData,j=b.ref,S=(0,r.Z)((0,i.Z)({},Z),{parentId:v}),_=(0,s.a)(u.Im,{variables:S}),q=_.data,T=void 0===q?{taxonomy:[],meta:{aggregate:{totalCount:0}}}:q,I=T.taxonomy,$=T.meta,C=_.loading,w=_.refetch,k=function(){w(),o&&o(),x.close()},P=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,r.Z)((0,i.Z)({},o),{type:h});"assetQuestion"!==h||s.id||(s.name="assetQuestionField-".concat(I.length)),x.show({title:o.id?"Edit":"Add",content:(0,a.jsx)(p.j,{entity:n,entityId:t,defaultValues:s,onSuccess:k,groups:{},parentId:v})})},F=function(e){var n;return[{context:"secondary",disabled:null===(n=e.data.meta)||void 0===n?void 0:n.isSystem,icon:["fas","edit"],onClick:function(e,n){return P("edit",n.data)},tooltip:"Edit"}]},O=[{hidden:!0},{hidden:!0},{text:"Name",formatter:function(e){var n,t,i=e.row;return"assetQuestion"===h?null==i?void 0:null===(n=i.data)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.label:i.name}},{hidden:!0},{text:"Status"},{formatter:l.Z,formatterData:F,text:"Actions"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.t,{columns:O,loading:C,meta:$,ref:j,refetch:w,rows:I.map(function(e){return{data:e,id:e.id,name:e.name,status:e.status,statusText:(0,c.Z)(e.status),actions:""}})}),(0,a.jsx)(d.H,{content:"Add New",handleClick:P})]})};v.propTypes={entity:o.string,entityId:o.number,refetchCompliance:o.func,type:o.string,parentId:o.number}},70616:function(e,n,t){t.d(n,{j:function(){return U}});var i=t(47568),r=t(26042),a=t(69396),o=t(828),s=t(97582),u=t(85893),l=t(67294),c=t(45697),d=t(50319),p=t(42575),m=t(42283),y=t(79665),f=t(76600),g=t(49501),v=t(55563),h=t(95103),x=t(62047),b=t(58594),Z=t(15214),j=t(9270),S=t(62140),_=t(29005),q=t(55843),T=[{disabled:!0,text:"Please choose...",value:""},{text:"Checkbox",value:"checkbox",hasOptions:!0},{text:"CurrencyInput",value:"currencyInput",hasOptions:!1},{text:"Datepicker",value:"datepicker",hasOptions:!1},{text:"Input",value:"input",hasOptions:!1},{text:"Radio",value:"radio",hasOptions:!0},{text:"Select",value:"select",hasOptions:!0},{text:"Range(1 - 10)",value:"selectRange",hasOptions:!1},{text:"TextArea",value:"textArea",hasOptions:!1},{text:"Upload File",value:"media",hasOptions:!1}],I=[{text:"Email",value:"email"},{text:"Number",value:"number"},{text:"Text",value:"text"}],$=function(e){var n=e.defaultOptions,t=(0,m.qo)({control:n.control,name:"input"}),i=t&&T.find(function(e){return e.value===t}).hasOptions,o=(0,m.Dq)({control:n.control,name:"options"}),s=o.fields,c=o.append,d=o.remove;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.Z,{label:"Label",children:(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},n),{name:"label"}))}),(0,u.jsx)(g.Z,{label:"Input",children:(0,u.jsx)(h.Z,(0,a.Z)((0,r.Z)({},n),{name:"input",options:T}))}),"input"===t&&(0,u.jsx)(g.Z,{label:"Type",children:(0,u.jsx)(h.Z,(0,a.Z)((0,r.Z)({},n),{name:"inputType",options:I}))}),i&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(j.Z,{children:[(0,u.jsx)(S.Z,{xs:4,md:4,children:(0,u.jsx)(g.Z,{label:"Options"})}),(0,u.jsx)(S.Z,{children:(0,u.jsx)(_.Z,{iconName:"plus",onClick:c})})]}),s.map(function(e,t){return(0,u.jsxs)(l.Fragment,{children:[(0,u.jsxs)(j.Z,{align:"center",children:[(0,u.jsx)(S.Z,{xs:5,md:5,children:(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},n),{defaultValue:e.label,name:"options[".concat(t,"].label"),placeholder:"Label"}))}),(0,u.jsx)(S.Z,{xs:5,md:5,children:(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},n),{defaultValue:e.value,name:"options[".concat(t,"].value"),placeholder:"Value"}))}),(0,u.jsx)(S.Z,{xs:2,md:2,children:(0,u.jsx)(_.Z,{iconName:"delete",onClick:function(){return d(t)}})})]}),(0,u.jsx)(q.Z,{marginBottom:"md"})]},e.id)})]}),(0,u.jsx)(b.Z,(0,a.Z)((0,r.Z)({},n),{name:"required",data:[{label:"Required",value:!0}],stacked:!0}))]})};$.propTypes={defaultOptions:c.object};var C,w=t(21789),k=t(35292),P=t(29815),F=[{name:"acquisitionCost",meta:{input:"currencyInput",inputType:"number",label:"Acquisition cost",isSystem:!0,questionType:"tco",required:!0}},{name:"datePutInService",meta:{input:"datepicker",inputType:"text",label:"Date put in service",isSystem:!0,questionType:"tco",required:!0}},{name:"usefulLife",meta:{input:"input",inputType:"number",label:"Useful life (months)",isSystem:!0,questionType:"tco",required:!0}},{name:"maintenanceSpend",meta:{input:"currencyInput",inputType:"number",label:"Maintenance spend (\xa3 p/m)",isSystem:!0,questionType:"tco",required:!0}},{name:"residualValue",meta:{input:"currencyInput",inputType:"number",label:"Residual Value",isSystem:!0,questionType:"tco",required:!0}}],O=[{name:"type",meta:{input:"select",inputType:"text",label:"Type",options:[{label:"Thermo",value:"thermo"},{label:"Occupancy",value:"occupancy"}],questionType:"sensor",isSystem:!0,required:!0}},{name:"brand",meta:{input:"select",inputType:"text",label:"Brand",options:[{label:"AirThings",value:"airthings"},{label:"Other",value:"other"}],questionType:"sensor",isSystem:!0,required:!0}}],R=(C=(0,i.Z)(function(e){var n,t,i,r,a,o,u,l,c;return(0,s.__generator)(this,function(a){switch(a.label){case 0:return n=e.addTaxonomy,t=e.adminId,i=e.hasSensorQuestions,r=e.hasTCOQuestions,l={status:"active",adminId:t,parentId:e.parentId,type:"assetQuestion"},c=[],r&&(o=c).push.apply(o,(0,P.Z)(Q(F,l))),i&&(u=c).push.apply(u,(0,P.Z)(Q(O,l))),[4,n({variables:{objects:(0,P.Z)(c)}})];case 1:return a.sent(),[2]}})}),function(e){return C.apply(this,arguments)}),Q=function(e,n){return e.map(function(e){return e=(0,r.Z)({},e,n)})},A=t(2845),G=t(51233),U=function(e){var n,t,c,j,S,_,q,T,I=e.defaultValues,C=e.entity,P=e.entityId,F=e.groups,O=e.hasSublocation,Q=e.isAssetCategoryParent,U=e.onSuccess,V=e.parentId,E=void 0===V?null:V,N=e.systemQuestions,z=(0,A.x)().user,L=(0,l.useState)(!1),B=L[0],X=L[1],D=I.type,J=(0,l.useState)(!1),H=J[0],W=J[1],M=(0,l.useState)(!1),Y=M[0],K=M[1],ee=(0,m.cI)({defaultValues:(0,a.Z)((0,r.Z)({},I),{input:null==I?void 0:null===(n=I.meta)||void 0===n?void 0:n.input,inputType:null==I?void 0:null===(t=I.meta)||void 0===t?void 0:t.inputType,sensor:(null==I?void 0:I.hasSensor)||!1,label:null==I?void 0:null===(c=I.meta)||void 0===c?void 0:c.label,options:null==I?void 0:null===(j=I.meta)||void 0===j?void 0:j.options,required:null==I?void 0:null===(S=I.meta)||void 0===S?void 0:S.required,customerSignature:null==I?void 0:null===(_=I.meta)||void 0===_?void 0:_.customerSignature,supplierSignature:null==I?void 0:null===(q=I.meta)||void 0===q?void 0:q.supplierSignature,sublocation:(null==I?void 0:null===(T=I.meta)||void 0===T?void 0:T.sublocation)||!1}),resolver:(0,y.S)((0,k.S)(D))}),en=ee.control,et=ee.errors,ei=ee.handleSubmit,er=ee.register,ea=ee.setValue,eo=ee.watch,es=eo("sublocation");es="false"!==es&&Boolean(es);var eu=eo("sensor");eu="false"!==eu&&Boolean(eu);var el,ec=function(e,n){ea(e,n),ed()},ed=function(){K(!1),W(!1)},ep=(0,o.Z)((0,d.D)(p.mW,{onCompleted:function(e){var n=e.insert_Taxonomy.returning[0],t=n.id,i=n.type;(B||eu)&&"assetQuestion"!==i?R({hasTCOQuestions:B,hasSensorQuestions:eu,addTaxonomy:ep,adminId:z.accountId,parentId:t}):U&&U(t)}}),1)[0],em=(0,o.Z)((0,d.D)(p.ze,{onCompleted:function(e){var n=e.update_Taxonomy_by_pk,t=n.id,i=n.type;!N.sensor&&eu&&"assetQuestion"!==i?R({hasTCOQuestions:B,hasSensorQuestions:eu,addTaxonomy:ep,adminId:z.accountId,parentId:t}):U&&U(t)}}),1)[0],ey=(el=(0,i.Z)(function(e){return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(E&&(e.parentId=E),es&&eu)return[2,K(!0)];if(O&&es&&!I.id)return[2,W(!0)];if(Q&&(e.isGroup=!0),e.entity=C,e.entityId=P,e.meta=(0,a.Z)((0,r.Z)({},(null==I?void 0:I.meta)||{}),{input:e.input,options:e.options,inputType:e.inputType,label:e.label,required:e.required,customerSignature:e.customerSignature,supplierSignature:e.supplierSignature,sublocation:e.sublocation}),delete e.input,delete e.inputType,delete e.sensor,delete e.label,delete e.options,delete e.required,delete e.sublocation,delete e.customerSignature,delete e.supplierSignature,e.adminId=z.accountId,!(null==I?void 0:I.id))return[3,2];return[4,em({variables:{id:I.id,changes:e}})];case 1:return n.sent(),[3,4];case 2:return[4,ep({variables:{objects:[e]}})];case 3:n.sent(),n.label=4;case 4:return[2]}})}),function(e){return el.apply(this,arguments)}),ef={control:en,errors:et,register:er},eg=(0,a.Z)((0,r.Z)({},ef),{context:"secondary",size:"sm"});return(0,u.jsxs)(f.Z,{id:"offCanvasForm",handleSubmit:ei(ey),children:["assetQuestion"!==D&&(0,u.jsx)(g.Z,{label:"Name",children:(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},ef),{name:"name"}))}),("assetQuestion"===D||"complianceQuestions"===D||"supplierQuestion"===D)&&(0,u.jsx)($,{defaultOptions:ef}),(null==F?void 0:F.length)>0&&(0,u.jsx)(g.Z,{label:"Group",children:(0,u.jsx)(h.Z,(0,a.Z)((0,r.Z)({},ef),{name:"parentId",options:F}))}),(0,u.jsx)(g.Z,{label:"Status",children:(0,u.jsx)(h.Z,(0,a.Z)((0,r.Z)({},ef),{name:"status",options:w.bg}))}),"assetCategory"===D&&!Q&&!I.id&&(0,u.jsx)(g.Z,{label:"Total cost of ownership",children:(0,u.jsx)(x.Z,{context:"secondary",onToggle:function(e){return X(e)},size:"sm",toggled:B})}),"assetCategory"===D&&!Q&&(0,u.jsx)(g.Z,{label:"Sensor",children:(0,u.jsx)(x.Z,{context:"secondary",disabled:N.sensor,onToggle:function(e){return ec("sensor",e)},size:"sm",toggled:eu})}),"assetCategory"===D&&!Q&&(0,u.jsx)(g.Z,{label:"Sublocation",children:(0,u.jsx)(x.Z,(0,a.Z)((0,r.Z)({},eg),{onToggle:function(e){return ec("sublocation",e)},toggled:es}))}),"signatures"===D&&(0,u.jsxs)(G.Z,{spacing:10,direction:"row",children:[(0,u.jsx)(b.Z,(0,a.Z)((0,r.Z)({},ef),{name:"customerSignature",data:[{label:"Customer",value:!0}],stacked:!0})),(0,u.jsx)(b.Z,(0,a.Z)((0,r.Z)({},ef),{name:"supplierSignature",data:[{label:"Supplier",value:!0}],stacked:!0}))]}),H&&(0,u.jsx)(Z.Z,{content:"You can only create one sublocation",context:"warning"}),Y&&(0,u.jsx)(Z.Z,{content:"You can only select a sub-location or a sensor",context:"warning"}),"assetQuestion"===D&&(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},ef),{name:"name",type:"hidden"})),(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},ef),{name:"sensor",type:"hidden"})),"assetCategory"===D&&(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},ef),{name:"sublocation",type:"hidden"})),(0,u.jsx)(v.Z,(0,a.Z)((0,r.Z)({},ef),{name:"type",type:"hidden"}))]})};U.propTypes={defaultValues:c.object,entity:c.string,entityId:c.number,hasSublocation:c.bool,isAssetCategoryParent:c.bool,onSuccess:c.func.isRequired,systemQuestions:c.object},U.defaultProps={hasSublocation:!1,isAssetCategoryParent:!1,systemQuestions:{sensor:!1}}},35292:function(e,n,t){t.d(n,{S:function(){return r},b:function(){return a}});var i=t(74231),r=function(e){var n="assetQuestion"===e||"complianceQuestions"===e||"supplierQuestion"===e;return(0,i.Ry)().shape({group:(0,i.Rx)(),input:n&&(0,i.Z_)().required(),label:n&&(0,i.Z_)().required(),name:(0,i.Z_)().required(),questions:(0,i.Xg)(),status:(0,i.Z_)().oneOf(["active","inactive"]).required(),sublocation:(0,i.Xg)(),required:(0,i.Xg)(),customerSignature:(0,i.Xg)(),supplierSignature:(0,i.Xg)()})},a=(0,i.Ry)().shape({reportPassFail:(0,i.Xg)(),reportPassFailTitle:(0,i.Z_)().when(["reportPassFail"],function(e,n){return e?n.max(50).required():n.nullable()})})},42575:function(e,n,t){t.d(n,{Im:function(){return p},RQ:function(){return f},X4:function(){return v},fC:function(){return g},mW:function(){return m},ze:function(){return y}});var i=t(7297),r=t(75063);function a(){var e=(0,i.Z)(['\n  query GetTaxonomys(\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: Taxonomy_order_by!\n    $status: String = "active"\n    $type: String\n    $typeGroup: String\n    $parentId: Int\n    $fetchGroup: Boolean! = true\n    $id: Int\n    $isGroup: Boolean = false\n  ) {\n    taxonomy: Taxonomy(\n      limit: $limit\n      offset: $offset\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: $status }\n        type: { _eq: $type }\n        parentId: { _eq: $parentId }\n        id: { _eq: $id }\n        isGroup: { _eq: $isGroup }\n      }\n      order_by: [$orderBy]\n    ) {\n      options: Taxonomies(\n        where: {\n          type: { _eq: $type }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n\n        childs: Taxonomies(order_by: { id: asc }, where: { status: { _eq: "active" } }) {\n          taxonomyId: id\n          name\n          type\n          meta\n          status\n        }\n      }\n      id\n      name\n      type\n      status\n      parentId\n      createdAt\n      meta\n      parent: Parent {\n        id\n        name\n        type\n      }\n      childs: Taxonomies(order_by: { id: asc }, where: { status: { _eq: "active" } }) {\n        taxonomyId: id\n        name\n        type\n        meta\n        status\n      }\n      jobs: Taxonomy_Entities_aggregate(\n        where: { Taxonomy: { type: { _eq: "jobTags" } }, entity: { _eq: "Job" } }\n      ) {\n        aggregate {\n          count\n        }\n      }\n    }\n    meta: Taxonomy_aggregate(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: $status }\n        type: { _eq: $type }\n        parentId: { _eq: $parentId }\n        id: { _eq: $id }\n        isGroup: { _eq: $isGroup }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n    taxonomyGroup: Taxonomy(where: { isGroup: { _eq: true }, type: { _eq: $typeGroup } })\n      @include(if: $fetchGroup) {\n      value: id\n      text: name\n    }\n  }\n']);return a=function(){return e},e}function o(){var e=(0,i.Z)(["\n  query GetTaxonomy($id: Int!) {\n    taxonomy: Taxonomy_by_pk(id: $id) {\n      id\n      name\n      type\n      status\n      parentId\n      createdAt\n      meta\n    }\n  }\n"]);return o=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation AddTaxonomy($objects: [Taxonomy_insert_input!]!) {\n    insert_Taxonomy(objects: $objects) {\n      returning {\n        id\n        type\n      }\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation UpdateTaxonomy($id: Int!, $changes: Taxonomy_set_input) {\n    update_Taxonomy_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n      type\n    }\n  }\n"]);return u=function(){return e},e}function l(){var e=(0,i.Z)(["\n  query GeTaxonomyWithEntities($type: String!, $entity: String!, $entityId: Int!) {\n    questions: Taxonomy(where: { type: { _eq: $type } }) {\n      id\n      meta\n      name\n      status\n      taxonomy_entity: Taxonomy_Entities(\n        where: { entityId: { _eq: $entityId }, entity: { _eq: $entity } }\n      ) {\n        comments\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation InsertTaxonomyEntity(\n    $entity: String!\n    $entityId: Int!\n    $questions: [Taxonomy_Entity_insert_input!]!\n    $objectStatusLog: [StatusLog_insert_input!]!\n    $hasStatusLog: Boolean!\n  ) {\n    delete_Taxonomy_Entity(where: { entityId: { _eq: $entityId }, entity: { _eq: $entity } }) {\n      returning {\n        id\n      }\n    }\n    insert_Taxonomy_Entity(objects: $questions) {\n      returning {\n        id\n      }\n    }\n\n    insert_StatusLog(objects: $objectStatusLog) @include(if: $hasStatusLog) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query GetSlasForTemplate($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    slas: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      id\n      label: name\n      subtype\n      notes\n      onSite\n      onSiteUnit\n      quoteReturned\n      quoteReturnedUnit\n    }\n  }\n"]);return d=function(){return e},e}var p=(0,r.Ps)(a());(0,r.Ps)(o());var m=(0,r.Ps)(s()),y=(0,r.Ps)(u()),f=(0,r.Ps)(l()),g=(0,r.Ps)(c()),v=(0,r.Ps)(d())},32749:function(e,n,t){t.d(n,{l:function(){return y}});var i=t(26042),r=t(69396),a=t(99534),o=t(85893),s=t(67294),u=t(45697),l=t(6812),c=t(42575),d=t(49501),p=t(84043),m=function(e,n){var t,i,r,a=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(i=n.errors[n.name])||void 0===i?void 0:i.message)&&(a=!1),["name","type"].forEach(function(t){e[t]!==n[t]&&(a=!1)}),a},y=(0,s.memo)(function(e){var n,t,s,u=e.control,m=e.errors,y=e.label,f=e.name,g=e.register,v=e.type,h=e.filters,x=(0,a.Z)(e,["control","errors","label","name","register","type","filters"]),b=(s=(void 0===(t=(0,l.a)(c.Im,{variables:(0,r.Z)((0,i.Z)({isGroup:"assetCategory"===v},h),{orderBy:{name:"asc"},type:v})}).data)?{taxonomy:[]}:t).taxonomy,"assetCategory"===v?s.map(function(e){return{label:e.name,options:e.options,childs:e.childs,meta:e.meta}}):s.map(function(e){return{label:e.name,value:e.id,childs:e.childs,meta:e.meta}}));return(0,o.jsx)(d.Z,{id:f,label:y,children:(0,o.jsx)(p.Z,(0,i.Z)((0,r.Z)((0,i.Z)({},{control:u,errors:m,register:g}),{cacheOptions:!0,isClearable:!0,options:b,name:f}),x))})},m);y.propTypes={control:u.object.isRequired,errors:u.object.isRequired,label:u.string.isRequired,filters:u.object,type:(0,u.oneOf)(["assetCategory","expenseCategory","jobTags","costCategory","clientType","tags"])},y.defaultProps={filters:{}}},59938:function(e,n,t){t.d(n,{X:function(){return y}});var i=t(14924),r=t(82670),a=t(828),o=t(7297),s=t(67294),u=t(6812),l=t(50319),c=t(75063),d=t(18586);function p(){var e=(0,o.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return p=function(){return e},e}function m(){var e=(0,o.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return m=function(){return e},e}function y(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",o=(0,d.q)().user,c=(0,s.useState)(function(){try{switch(t){case"network":case"state":return n;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||n}}catch(i){return n}}),p=c[0],m=c[1],y=function(n){try{var a=(0,r.Z)(n,Function)?n(p):n;switch(m(a),t){case"network":v({variables:{accountUserId:null==o?void 0:o.accountUserId,filters:(0,i.Z)({},e,a)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(a))}}catch(s){}};(0,u.a)(f,{variables:{accountUserId:null==o?void 0:o.accountUserId},skip:"network"!==t,onCompleted:function(t){var i=t.accountUser;i&&m(i.filters[e]||n)}});var v=(0,a.Z)((0,l.D)(g),1)[0];return[p,y]}var f=(0,c.Ps)(p()),g=(0,c.Ps)(m())},21789:function(e,n,t){t.d(n,{bg:function(){return i}});var i=[{text:"Status",value:""},{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}]},55862:function(e,n,t){t.d(n,{J:function(){return j}});var i=t(26042),r=t(69396),a=t(99534),o=t(828),s=t(85893),u=t(11163),l=t(67294),c=t(45697),d=t(9270),p=t(62140),m=t(42283),y=t(76600),f=t(11585),g=t(49501),v=t(75903),h=t(77439),x=t(25742),b=t(59938),Z=function(e){var n=e.initialValues,t=e.renderFilters,a=e.setFilters,u=e.lastQuery,c=e.filters,Z=(0,o.Z)((0,b.X)("form_data_".concat(n.filterType),n),2),j=Z[0],S=Z[1],_=(0,m.cI)({defaultValues:j||n}),q=_.control,T=_.errors,I=_.handleSubmit,$=_.register,C=_.reset,w=_.watch,k=_.setValue,P=w(),F=(0,r.Z)((0,i.Z)({},P),{filterType:n.filterType});(0,l.useEffect)(function(){C(F)},[C]),(0,l.useEffect)(function(){S(F)},[c]);var O=function(e){var t=e.query;if(t!==u){var r={q:"%".concat(t,"%")||0},o=/^\d+$/.test(t);"id"in n&&(r.id=o?Number(t):null),"meta"in n&&(r.meta=o?{invoiceNumbers:[t]}:null),"jobNumber"in n&&(r.jobNumber=o?String(t):null,r.invoiceNumber=o?Number(t):null),a(function(e){return(0,i.Z)({},e,r)})}},R=function(e){Object.keys(n).map(function(e){return k(e,null)}),a(n),C(n),O("")};return(0,s.jsx)(y.Z,{handleSubmit:I(O),children:(0,s.jsxs)(f.Z,{title:"Filters",children:[(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(p.Z,{sm:12,lg:12,children:(0,s.jsx)(g.Z,{label:"",children:(0,s.jsx)(v.Z,{errors:T,label:"Search",name:"email",placeholder:"Search...",prependSearchIcon:!0,register:$,type:"search"})})}),(0,s.jsx)(p.Z,{sm:12,lg:12,children:t({control:q,errors:T,initialValues:n,register:$,setFilters:a,watch:w,setValue:k,reset:C})})]}),(0,s.jsx)(x.H,{content:"Search",context:"secondary",handleClick:O,type:"submit",children:(0,s.jsx)(h.Z,{content:"Clear",context:"danger",onClick:R,size:"sm"})})]})})};Z.propTypes={initialValues:c.object,renderFilters:c.func.isRequired,setFilters:c.func.isRequired};var j=function(e){var n=e.FiltersComp,t=e.initialFilters,c=e.TableComp,m=(0,a.Z)(e,["FiltersComp","initialFilters","TableComp"]),y=(0,o.Z)((0,b.X)("form_data_".concat(t.filterType),t),2),f=y[0],g=y[1],v=(0,l.useState)(f||t),h=v[0],x=v[1],j=(0,u.useRouter)().query.show;return(0,l.useEffect)(function(){g(h)},[h,g]),(0,s.jsx)(d.Z,{children:(0,s.jsxs)(p.Z,{sm:12,lg:12,children:[(0,s.jsx)(Z,{initialValues:t,renderFilters:function(e){return(0,s.jsx)(n,(0,r.Z)((0,i.Z)({},e,m),{show:j}))},setFilters:x,filters:h}),(0,s.jsx)(c,(0,i.Z)({filters:h,initialFilters:t},m))]})})};j.propTypes={FiltersComp:c.func,initialFilters:c.object.isRequired,TableComp:c.func}}}]);