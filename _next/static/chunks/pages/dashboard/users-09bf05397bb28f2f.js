(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{48045:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/users",function(){return n(80803)}])},46929:function(e,r,n){"use strict";n.d(r,{r:function(){return u}});var t=n(85893),s=n(45697),i=n(95103),u=function(e){var r=e.errors,n=e.name,s=e.onChange,u=e.options,c=e.register;return(0,t.jsx)(i.Z,{errors:r,name:n,onChange:s,options:u,register:c})};u.propTypes={errors:s.object.isRequired,name:s.string,onChange:s.func,options:s.array.isRequired,register:s.func.isRequired},u.defaultProps={name:"status"}},59938:function(e,r,n){"use strict";n.d(r,{X:function(){return h}});var t=n(14924),s=n(82670),i=n(828),u=n(7297),c=n(67294),o=n(6812),a=n(50319),l=n(75063),f=n(18586);function d(){var e=(0,u.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,u.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return p=function(){return e},e}function h(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",u=(0,f.q)().user,l=(0,c.useState)(function(){try{switch(n){case"network":case"state":return r;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||r}}catch(t){return r}}),d=l[0],p=l[1],h=function(r){try{var i=(0,s.Z)(r,Function)?r(d):r;switch(p(i),n){case"network":g({variables:{accountUserId:null==u?void 0:u.accountUserId,filters:(0,t.Z)({},e,i)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(i))}}catch(c){}};(0,o.a)(m,{variables:{accountUserId:null==u?void 0:u.accountUserId},skip:"network"!==n,onCompleted:function(n){var t=n.accountUser;t&&p(t.filters[e]||r)}});var g=(0,i.Z)((0,a.D)(Z),1)[0];return[d,h]}var m=(0,l.Ps)(d()),Z=(0,l.Ps)(p())},55862:function(e,r,n){"use strict";n.d(r,{J:function(){return _}});var t=n(26042),s=n(69396),i=n(99534),u=n(828),c=n(85893),o=n(11163),a=n(67294),l=n(45697),f=n(9270),d=n(62140),p=n(42283),h=n(76600),m=n(11585),Z=n(49501),g=n(75903),b=n(77439),j=n(25742),v=n(59938),y=function(e){var r=e.initialValues,n=e.renderFilters,i=e.setFilters,o=e.lastQuery,l=e.filters,y=(0,u.Z)((0,v.X)("form_data_".concat(r.filterType),r),2),_=y[0],x=y[1],F=(0,p.cI)({defaultValues:_||r}),w=F.control,C=F.errors,T=F.handleSubmit,S=F.register,k=F.reset,q=F.watch,U=F.setValue,I=q(),N=(0,s.Z)((0,t.Z)({},I),{filterType:r.filterType});(0,a.useEffect)(function(){k(N)},[k]),(0,a.useEffect)(function(){x(N)},[l]);var R=function(e){var n=e.query;if(n!==o){var s={q:"%".concat(n,"%")||0},u=/^\d+$/.test(n);"id"in r&&(s.id=u?Number(n):null),"meta"in r&&(s.meta=u?{invoiceNumbers:[n]}:null),"jobNumber"in r&&(s.jobNumber=u?String(n):null,s.invoiceNumber=u?Number(n):null),i(function(e){return(0,t.Z)({},e,s)})}},E=function(e){Object.keys(r).map(function(e){return U(e,null)}),i(r),k(r),R("")};return(0,c.jsx)(h.Z,{handleSubmit:T(R),children:(0,c.jsxs)(m.Z,{title:"Filters",children:[(0,c.jsxs)(f.Z,{children:[(0,c.jsx)(d.Z,{sm:12,lg:12,children:(0,c.jsx)(Z.Z,{label:"",children:(0,c.jsx)(g.Z,{errors:C,label:"Search",name:"email",placeholder:"Search...",prependSearchIcon:!0,register:S,type:"search"})})}),(0,c.jsx)(d.Z,{sm:12,lg:12,children:n({control:w,errors:C,initialValues:r,register:S,setFilters:i,watch:q,setValue:U,reset:k})})]}),(0,c.jsx)(j.H,{content:"Search",context:"secondary",handleClick:R,type:"submit",children:(0,c.jsx)(b.Z,{content:"Clear",context:"danger",onClick:E,size:"sm"})})]})})};y.propTypes={initialValues:l.object,renderFilters:l.func.isRequired,setFilters:l.func.isRequired};var _=function(e){var r=e.FiltersComp,n=e.initialFilters,l=e.TableComp,p=(0,i.Z)(e,["FiltersComp","initialFilters","TableComp"]),h=(0,u.Z)((0,v.X)("form_data_".concat(n.filterType),n),2),m=h[0],Z=h[1],g=(0,a.useState)(m||n),b=g[0],j=g[1],_=(0,o.useRouter)().query.show;return(0,a.useEffect)(function(){Z(b)},[b,Z]),(0,c.jsx)(f.Z,{children:(0,c.jsxs)(d.Z,{sm:12,lg:12,children:[(0,c.jsx)(y,{initialValues:n,renderFilters:function(e){return(0,c.jsx)(r,(0,s.Z)((0,t.Z)({},e,p),{show:_}))},setFilters:j,filters:b}),(0,c.jsx)(l,(0,t.Z)({filters:b,initialFilters:n},p))]})})};_.propTypes={FiltersComp:l.func,initialFilters:l.object.isRequired,TableComp:l.func}},80803:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return b}});var t=n(85893),s=n(19076),i=n(55862),u=n(8299),c=n(26042),o=n(69396),a=n(45697),l=n(9270),f=n(62140),d=n(46929),p=n(20402),h=n(21789),m=function(e){var r=e.errors,n=e.register,s=e.setFilters,i={errors:r,register:n};return(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(f.Z,{md:6,children:(0,t.jsx)(d.r,(0,o.Z)((0,c.Z)({},i),{onChange:function(e){return s(function(r){return(0,o.Z)((0,c.Z)({},r),{status:e.target.value||null})})},options:h.bg}))}),(0,t.jsx)(f.Z,{md:6,children:(0,t.jsx)(d.r,(0,o.Z)((0,c.Z)({},i),{name:"accountType",onChange:function(e){return s(function(r){return(0,o.Z)((0,c.Z)({},r),{accountType:e.target.value||null})})},options:p.l}))})]})};m.propTypes={errors:a.object.isRequired,register:a.func.isRequired,setFilters:a.func.isRequired};var Z={accountType:null,q:null,status:"active",filterType:"users_table"},g=function(){return(0,t.jsx)(i.J,{FiltersComp:m,initialFilters:Z,TableComp:u.P})},b=function(){return(0,t.jsx)(s.Z,{pageHeading:{heading:"Users"},View:(0,t.jsx)(g,{})})}}},function(e){e.O(0,[3662,2283,212,619,8890,2583,4135,6043,1564,1336,3776,5370,2329,778,6540,1023,1870,2797,653,1207,5497,5057,6733,61,9774,2888,179],function(){return e(e.s=48045)}),_N_E=e.O()}]);