(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4064,4972],{34193:function(n,e,t){"use strict";var r=t(64836);e.Z=void 0;var i=r(t(64938)),o=t(85893);e.Z=(0,i.default)((0,o.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined")},65817:function(n,e,t){"use strict";var r=t(64836);e.Z=void 0;var i=r(t(64938)),o=t(85893);e.Z=(0,i.default)((0,o.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications")},81261:function(n,e,t){"use strict";var r=t(64836);e.Z=void 0;var i=r(t(64938)),o=t(85893);e.Z=(0,i.default)((0,o.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage")},58951:function(n,e,t){"use strict";t.d(e,{Z:function(){return b}});var r=t(63366),i=t(87462),o=t(67294),a=t(63961),s=t(58510),u=t(90948),c=t(14136),l=t(71657),d=t(15861),m=t(1977),f=t(8027);function p(n){return(0,f.ZP)("MuiDialogContentText",n)}(0,m.Z)("MuiDialogContentText",["root"]);var h=t(85893);let g=["children","className"],v=n=>{let{classes:e}=n,t=(0,s.Z)({root:["root"]},p,e);return(0,i.Z)({},e,t)},_=(0,u.ZP)(d.Z,{shouldForwardProp:n=>(0,c.Z)(n)||"classes"===n,name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,e)=>e.root})({}),y=o.forwardRef(function(n,e){let t=(0,l.Z)({props:n,name:"MuiDialogContentText"}),{className:o}=t,s=(0,r.Z)(t,g),u=v(s);return(0,h.jsx)(_,(0,i.Z)({component:"p",variant:"body1",color:"text.secondary",ref:e,ownerState:s,className:(0,a.Z)(u.root,o)},t,{classes:u}))});var b=y},37645:function(n,e,t){"use strict";var r=t(87462),i=t(63366),o=t(67294),a=t(63961),s=t(58510),u=t(15861),c=t(90948),l=t(71657),d=t(4472),m=t(34182),f=t(85893);let p=["className","id"],h=n=>{let{classes:e}=n;return(0,s.Z)({root:["root"]},d.a,e)},g=(0,c.ZP)(u.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(n,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),v=o.forwardRef(function(n,e){let t=(0,l.Z)({props:n,name:"MuiDialogTitle"}),{className:s,id:u}=t,c=(0,i.Z)(t,p),d=h(t),{titleId:v=u}=o.useContext(m.Z);return(0,f.jsx)(g,(0,r.Z)({component:"h2",className:(0,a.Z)(d.root,s),ownerState:t,ref:e,variant:"h6",id:null!=u?u:v},c))});e.Z=v},30845:function(n,e){"use strict";var t=Number.isNaN||function(n){return"number"==typeof n&&n!=n};function r(n,e){return!!(n===e||t(n)&&t(e))}function i(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!r(n[t],e[t]))return!1;return!0}e.Z=function(n,e){void 0===e&&(e=i);var t,r,o=[],a=!1;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return a&&t===this&&e(i,o)||(r=n.apply(this,i),a=!0,t=this,o=i),r}}},56529:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/quotes",function(){return t(31714)}])},45815:function(n,e,t){"use strict";t.d(e,{z:function(){return a}});var r=t(7297),i=t(75063);function o(){var n=(0,r.Z)(["\n  fragment AccountFields on Account {\n    id\n    type\n    name\n    status\n    vatId\n  }\n"]);return o=function(){return n},n}var a=(0,i.Ps)(o())},5336:function(n,e,t){"use strict";t.d(e,{C:function(){return w}});var r=t(85893),i=t(67294),o=t(45697),a=t.n(o),s=t(93946),u=t(25464),c=t(18972),l=t(57976),d=t(73890),m=t(69008),f=t(41687),p=t(60888),h=t(40535),g=t(63441),v=t(41733),_=t(77957),y=t(2548),b=t(24519),I=t(2391),$=t(69308),x=t(79369),q=t(22961),S=t(28201),Z=t(51233),j=t(15861),k={add:(0,r.jsx)(f.Z,{}),archive:(0,r.jsx)(d.Z,{}),avatar:(0,r.jsx)(S.Z,{}),check:(0,r.jsx)(p.Z,{}),delete:(0,r.jsx)(v.Z,{}),description:(0,r.jsx)(h.Z,{}),download:(0,r.jsx)(g.Z,{}),info:(0,r.jsx)(y.Z,{}),edit:(0,r.jsx)(_.Z,{}),location:(0,r.jsx)($.Z,{}),unarchive:(0,r.jsx)(m.Z,{}),uploadFile:(0,r.jsx)(b.Z,{}),receipt:(0,r.jsx)(I.Z,{}),visibility:(0,r.jsx)(q.Z,{})},C={default:(0,r.jsx)(l.Z,{}),defaultHoriz:(0,r.jsx)(x.Z,{}),description:(0,r.jsx)(h.Z,{})},w=function(n){var e=n.actionsData,t=n.icon,o=n.row,a=n.disabled,l=(0,i.useState)(null),d=l[0],m=l[1],f=function(n){n.stopPropagation(),m(n.currentTarget)},p=function(){m(null)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:a,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:f,children:C[t]}),(0,r.jsx)(u.Z,{id:"simple-menu",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:p,PaperProps:{sx:{borderRadius:2}},children:e(o).map(function(n,e){return(0,r.jsx)(c.Z,{disabled:n.disabled,onClick:function(e){n.onClick(e),p()},sx:{pl:3,pr:4},children:(0,r.jsxs)(Z.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==k?void 0:k[n.icon])||null,(0,r.jsx)(j.Z,{children:n.tooltip})]})},e)})})]})};w.propTypes={actionsData:a().func.isRequired,icon:a().oneOf(["default","description"]),row:a().any.isRequired,disabled:a().bool},w.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},78232:function(n,e,t){"use strict";t.d(e,{F:function(){return j}});var r=t(14924),i=t(26042),o=t(69396),a=t(85893),s=t(45697),u=t.n(s),c=t(10166),l=t(80482),d=t(23776),m=t(98456),f=t(16143),p=t(50135),h=t(99534),g=t(29815),v=t(74061),_=t(6498),y=t(75438),b=t(15861),I=t(61730),$=t(67294),x=(0,$.createContext)({}),q=(0,$.forwardRef)(function(n,e){var t=(0,$.useContext)(x);return(0,a.jsx)("div",(0,i.Z)({ref:e},n,t))}),S=(0,$.forwardRef)(function(n,e){var t=n.children,r=(0,h.Z)(n,["children"]),i=[];t.forEach(function(n){i.push(n),i.push.apply(i,(0,g.Z)(n.children||[]))});var o,s,u=(0,_.u)(),c=(0,I.Z)(u.breakpoints.up("sm"),{noSsr:!0}),l=i.length,d=c?36:48,m=function(n){return n.hasOwnProperty("group")?48:d},f=(s=(0,$.useRef)(null),(0,$.useEffect)(function(){null!=s.current&&s.current.resetAfterIndex(0,!0)},[l]),s);return(0,a.jsx)("div",{ref:e,children:(0,a.jsx)(x.Provider,{value:r,children:(0,a.jsx)(v.S_,{itemData:i,height:(l>8?8*d:i.map(m).reduce(function(n,e){return n+e},0))+16,width:"100%",ref:f,outerElementType:q,innerElementType:"ul",itemSize:function(n){return m(i[n])},overscanCount:5,itemCount:l,children:Z})})})});function Z(n){var e=n.data,t=n.index,r=n.style,s=e[t],u=(0,o.Z)((0,i.Z)({},r),{top:r.top+8});return s.hasOwnProperty("group")?(0,a.jsx)(y.Z,{component:"div",style:u,children:s.group},s.key):(0,a.jsx)(b.Z,(0,o.Z)((0,i.Z)({component:"li"},s[0]),{noWrap:!0,style:u,children:s[1].label}))}var j=function(n){var e=n.label,t=n.loading,r=n.placeholder,s=n.error,u=n.helperText,c=n.inputProps;return(0,a.jsx)(C,(0,o.Z)((0,i.Z)({},n),{disableListWrap:!0,PopperComponent:k,ListboxComponent:S,renderInput:function(n){return(0,a.jsx)(p.Z,(0,o.Z)((0,i.Z)({},n,c),{error:s,helperText:u,label:e,placeholder:r,color:"secondary",variant:"standard",InputProps:(0,o.Z)((0,i.Z)({},n.InputProps,(null==c?void 0:c.InputProps)||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(m.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))},renderOption:function(n,e,t){return[n,e,t.index]},renderGroup:function(n){return n}}))};j.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1},j.propTypes={value:u().shape({value:u().any,label:u().string}),onChange:u().func,label:u().string,loading:u().bool,onOpen:u().func,options:u().arrayOf(u().shape({value:u().any,label:u().string})),inputProps:u().object,withoutSelectIcon:u().bool,inputValue:u().string,onInputChange:u().func};var k=(0,c.Z)(f.Z)((0,r.Z)({zIndex:"12000 !important"},"& .".concat(l.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),C=(0,c.Z)(d.Z)(function(n){var e=n.withoutSelectIcon;return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":(0,i.Z)({},e&&{display:"none"})}}}})},48580:function(n,e,t){"use strict";t.d(e,{q:function(){return p}});var r=t(26042),i=t(69396),o=t(99534),a=t(85893),s=t(87918),u=t(98456),c=t(23776),l=t(50135),d=t(67294),m=t(45697),f=t.n(m),p=function(n){var e=n.loading,t=n.setSearch,m=n.textFieldProps,f=(0,o.Z)(n,["loading","setSearch","textFieldProps"]),p=(0,d.useState)(""),h=p[0],g=p[1];return(0,d.useEffect)(function(){var n=setTimeout(function(){t(h)},500);return function(){return clearTimeout(n)}},[h,t]),(0,a.jsx)(c.Z,(0,i.Z)((0,r.Z)({isOptionEqualToValue:function(n,e){return n.value===e.value}},f),{loading:e,onInputChange:function(n,e){g(e)},getOptionLabel:function(n){return"".concat(n.label)},renderTags:function(n,e){return n.map(function(n,t){return(0,a.jsx)(s.Z,(0,r.Z)({size:"small",label:n.label},e({index:t})))})},renderInput:function(n){return(0,a.jsx)(l.Z,(0,i.Z)((0,r.Z)({},n,m),{InputProps:(0,i.Z)((0,r.Z)({},n.InputProps,m.InputProps||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[e?(0,a.jsx)(u.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))}}))};p.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}},p.propTypes={multiple:f().bool,limitTags:f().number,filterSelectedOptions:f().bool,color:f().string,loading:f().bool,value:f().oneOf([f().array,f().object]),onChange:f().func,options:f().arrayOf(f().shape({value:f().any.isRequired,label:f().string.isRequired})).isRequired,onOpen:f().func,setSearch:f().func,textFieldProps:f().shape({label:f().string,variant:f().oneOf(["standard"]),color:f().string,error:f().bool,helperText:f().string})}},85488:function(n,e,t){"use strict";t.d(e,{H_:function(){return v},Vw:function(){return I},aL:function(){return p},pf:function(){return h},sW:function(){return b},wd:function(){return g},xY:function(){return _},yT:function(){return y}});var r=t(7297),i=t(75063),o=t(66312);function a(){var n=(0,r.Z)(["\n  fragment JobFields on Job {\n    access\n    issueReportedDescription\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteDueSupplier\n    quoteCharge\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,r.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,r.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,r.Z)(["\n  mutation UpdateJob(\n    $id: Int!\n    $changes: Job_set_input\n    $timing: [JobTiming_insert_input!]!\n    $_append: Job_append_input = {}\n  ) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes, _append: $_append) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,r.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return d=function(){return n},n}function m(){var n=(0,r.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return m=function(){return n},n}function f(){var n=(0,r.Z)(['\n  query GetJob($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return f=function(){return n},n}var p=(0,i.Ps)(a()),h=(0,i.Ps)(s()),g=(0,i.Ps)(u()),v=(0,i.Ps)(c()),_=(0,i.Ps)(l()),y=(0,i.Ps)(d()),b=(0,i.Ps)(m()),I=(0,i.Ps)(f(),o.WW,o.MR)},26576:function(n,e,t){"use strict";t.d(e,{w:function(){return h},L:function(){return p}});var r=t(7297),i=t(75063),o=t(45815),a=t(85488),s=t(66312);function u(){var n=(0,r.Z)(["\n  fragment QuoteFields on Job {\n    quoteNumber\n    quoteDue\n    quoteCharge\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,r.Z)(["\n  query Quote($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      title\n      description\n      costCategory\n      status\n      workStatus\n      scheduledAt\n      createdAt\n      customerId\n      customerUserId\n      locationId\n      managerId\n      parentId\n      serviceId\n      slaId\n      tenantId\n      reference\n      amount\n      accountByTenantid {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customer: Account {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      expenses: Expenses {\n        id\n        paid\n        description\n        amount\n        markup\n        vat\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n      }\n      messages: Messages {\n        id\n        message\n        priority\n        taskId\n        jobId\n        locationId\n        description\n      }\n      service: Service {\n        id\n        name\n        countryId\n        currencyId\n      }\n      supplier: Suplier {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      manager: Manager {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      timings: JobTimings {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return c=function(){return n},n}var l=(0,i.Ps)(u());(0,i.Ps)(c());var d=t(75327);function m(){var n=(0,r.Z)(["\n  query GetQuotes(\n    $endDate: timestamptz\n    $limit: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $type: String\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobSupplierFields\n      ...QuoteFields\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return n},n}function f(){var n=(0,r.Z)(["\n  query GetQuotes(\n    $customerId: Int\n    $date: timestamptz\n    $endDate: timestamptz\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $customerManagerId: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $supplierId: Int\n    $type: String\n    $userId: Int\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ",'\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        type: { _eq: $type }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        customerUserId: { _eq: $userId }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobAdminFields\n      ...QuoteFields\n      statusLog\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n        lineItems: SupplierQuoteLineItems {\n          id\n          qty\n          total\n        }\n      }\n      supplier: Supplier {\n        ...AccountFields\n      }\n      admin: Admin {\n        id\n        name\n      }\n      customer: Customer {\n        ...AccountFields\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      manager: Manager {\n        ...UserFields\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ',"\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n        customerUserId: { _eq: $userId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return f=function(){return n},n}var p=(0,i.Ps)(m(),o.z,a.aL,l,a.H_,d.Px),h=function(n){var e=n.tagsWhere;return(0,i.Ps)(f(),e,e,o.z,s.WW,a.aL,a.wd,l,d.Px)}},42608:function(n,e,t){"use strict";var r=t(7297),i=t(75063),o=t(45815),a=t(85488),s=t(66312),u=t(75327);function c(){var n=(0,r.Z)(["\n  query GetDashboardList(\n    $accountId: Int\n    $adminId: Int\n    $customerId: Int\n    $supplierId: Int\n    $locationId: Int\n    $managerId: Int\n    $number: String\n    $asAt: timestamptz\n    $jobHoldReasonId: Int\n    $limit: Int\n    $monthStart: timestamptz\n    $offset: Int\n    $orderBy: dashboard_home_details_order_by!\n    $q: String\n    $tileName: String\n    $dayStart: timestamptz\n    $userId: Int\n    $status: [String!]\n    $yearStart: timestamptz\n    $type: String\n  ) {\n    quotes: getDashboard_HomeTile_Details(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { number: { _eq: $number } }\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ",'\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n      order_by: [$orderBy]\n      limit: $limit\n      offset: $offset\n    ) {\n      Assets(where: { entity: { _eq: "Job" } }) {\n        id\n        assetId\n        __typename\n      }\n      ...JobFields\n      ...JobAdminFields\n      admin: Admin {\n        id\n        name\n        __typename\n      }\n      customer: Customer {\n        ...AccountFields\n        __typename\n      }\n      location: Location {\n        id\n        name\n        __typename\n      }\n      manager: Manager {\n        ...UserFields\n        __typename\n      }\n      service: Service {\n        id\n        name\n        __typename\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n          __typename\n        }\n        __typename\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n      sla: SLA {\n        id\n        name\n        __typename\n      }\n      supplier: Supplier {\n        ...AccountFields\n        __typename\n      }\n      supplierOffers: SupplierOffers {\n        status\n        rate\n        supplier: Supplier {\n          ...AccountFields\n          __typename\n        }\n        __typename\n      }\n      job: Job {\n        type\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        id\n        status\n        createdAt\n        user: User {\n          ...UserFields\n          __typename\n        }\n        __typename\n      }\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      id: jobId\n      number\n      # location\n      priority\n      scheduledAt\n      assignedTo\n      jobHoldReason\n      locationId\n      meta\n      managerId\n      description\n      customerName\n      customerId\n      reference\n      serviceName\n      status\n      supplierId\n      supplierName\n      timingStart\n      type\n      quoteNumber\n      quoteDue\n      createdAt\n    }\n    meta: getDashboard_HomeTile_Details_aggregate(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ',"\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        number: { _eq: $number }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n        __typename\n      }\n      __typename\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return n},n}var l=function(n){var e=n.tagsWhere;return(0,i.Ps)(c(),e,e,o.z,s.WW,a.aL,a.wd,u.Px)};e.Z=l},4972:function(n,e,t){"use strict";t.d(e,{A5:function(){return nc},Ak:function(){return z},Cj:function(){return K},K4:function(){return no},Oq:function(){return nu},Qn:function(){return N},RJ:function(){return Y},SW:function(){return L},T_:function(){return H},UH:function(){return M},UM:function(){return nr},Ve:function(){return X},_d:function(){return J},_f:function(){return ni},by:function(){return B},cz:function(){return F},he:function(){return O},j$:function(){return G},kB:function(){return ne},kU:function(){return nn},kx:function(){return W},nD:function(){return U},nP:function(){return ns},pY:function(){return na},qd:function(){return E},t1:function(){return Q},yR:function(){return V},zR:function(){return nt}});var r=t(7297),i=t(75063);function o(){var n=(0,r.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,r.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return s=function(){return n},n}function u(){var n=(0,r.Z)(["\n  query GetAssetsForSelect(\n    $locationId: Int\n    $q: String\n    $categoryId: Int\n    $bookable: String\n    $limit: Int\n    $offset: Int\n  ) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,r.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']);return c=function(){return n},n}function l(){var n=(0,r.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,r.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return d=function(){return n},n}function m(){var n=(0,r.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return m=function(){return n},n}function f(){var n=(0,r.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]);return f=function(){return n},n}function p(){var n=(0,r.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return p=function(){return n},n}function h(){var n=(0,r.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return h=function(){return n},n}function g(){var n=(0,r.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return g=function(){return n},n}function v(){var n=(0,r.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]);return v=function(){return n},n}function _(){var n=(0,r.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]);return _=function(){return n},n}function y(){var n=(0,r.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return y=function(){return n},n}function b(){var n=(0,r.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return b=function(){return n},n}function I(){var n=(0,r.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return I=function(){return n},n}function $(){var n=(0,r.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return $=function(){return n},n}function x(){var n=(0,r.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "complianceCategory" } }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return x=function(){return n},n}function q(){var n=(0,r.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]);return q=function(){return n},n}function S(){var n=(0,r.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]);return S=function(){return n},n}function Z(){var n=(0,r.Z)(['\n  query GetTaxonomy($q: String, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return Z=function(){return n},n}function j(){var n=(0,r.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n    $includeMeta: Boolean! = false\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n      meta @include(if: $includeMeta)\n    }\n  }\n"]);return j=function(){return n},n}function k(){var n=(0,r.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']);return k=function(){return n},n}function C(){var n=(0,r.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']);return C=function(){return n},n}function w(){var n=(0,r.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']);return w=function(){return n},n}function A(){var n=(0,r.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]);return A=function(){return n},n}function T(){var n=(0,r.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return T=function(){return n},n}function P(){var n=(0,r.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n            code\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return P=function(){return n},n}function R(){var n=(0,r.Z)(['\n  query GetCompliancesForSelectNew($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Compliance(\n      where: {\n        name: { _ilike: $q }\n        Category: { type: { _eq: "complianceCategory" } }\n        Compliance_Entities: { entity: { _eq: "Location" }, Location: { id: { _eq: $locationId } } }\n      }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      value: id\n      label: name\n      category: Category {\n        label: name\n      }\n    }\n  }\n']);return R=function(){return n},n}function D(){var n=(0,r.Z)(['\n  query GetTaskAssignedToForSelect(\n    $accountId: Int\n    $q: String\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return D=function(){return n},n}var F=(0,i.Ps)(o()),E=(0,i.Ps)(a()),U=(0,i.Ps)(s()),M=(0,i.Ps)(u()),L=(0,i.Ps)(c()),N=(0,i.Ps)(l()),O=(0,i.Ps)(d()),z=(0,i.Ps)(m()),G=(0,i.Ps)(f()),J=(0,i.Ps)(p()),W=(0,i.Ps)(h()),Q=(0,i.Ps)(g()),H=(0,i.Ps)(v()),B=(0,i.Ps)(_()),V=(0,i.Ps)(y()),Y=(0,i.Ps)(b()),K=(0,i.Ps)(I()),X=(0,i.Ps)($()),nn=(0,i.Ps)(x()),ne=(0,i.Ps)(q()),nt=(0,i.Ps)(S()),nr=(0,i.Ps)(Z()),ni=(0,i.Ps)(j());(0,i.Ps)(k()),(0,i.Ps)(C()),(0,i.Ps)(w());var no=(0,i.Ps)(A()),na=(0,i.Ps)(T()),ns=(0,i.Ps)(P()),nu=(0,i.Ps)(R()),nc=(0,i.Ps)(D())},15033:function(n,e,t){"use strict";t.d(e,{i:function(){return S}});var r=t(14924),i=t(26042),o=t(69396),a=t(85893),s=t(67294),u=t(11163),c=t(45697),l=t.n(c),d=t(61870),m=t(5616),f=t(51233),p=t(15861),h=t(90948),g=t(41796),v=t(29217),_=t(45111),y=t(46003),b=t(70872),I=t(58886),$=t(61730),x=function(n){var e=n.currentPage,t=n.totalCount,r=n.pageSize,o=n.onPageChange,s=(0,$.Z)("(max-width:400px)"),u=(0,$.Z)("(max-width:500px)");return(0,a.jsx)(q,{mb:2,page:e,count:Math.ceil(t/r),onChange:function(n,e){return o(e)},variant:"outlined",shape:"rounded",size:s?"small":"medium",hidePrevButton:1===e,hideNextButton:e===Math.ceil(t/r),siblingCount:u?0:1,renderItem:function(n){return(0,a.jsx)(I.Z,(0,i.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},n))}})};x.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}},x.propTypes={currentPage:l().number,totalCount:l().number,pageSize:l().number,onPageChange:l().func};var q=(0,h.ZP)(b.Z)(function(n){var e,t=n.hidePrevButton,o=n.hideNextButton,a=n.theme;return e={},(0,r.Z)(e,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,r.Z)(e,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,r.Z)(e,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,r.Z)(e,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,r.Z)(e,"& button.Mui-selected",(0,i.Z)({color:a.palette.white.main,backgroundColor:a.palette.secondary.main},o?{borderRadius:"0 5px 5px 0"}:{},t?{borderRadius:"5px 0 0 5px"}:{})),e}),S=(0,s.forwardRef)(function(n,e){var t=n.columns,r=n.history,o=n.initialSort,c=n.meta,l=n.refetch,d=n.paginationSize,m=n.containerHeight,h=n.noResultsMessage,g=n.autoHeight,b=(0,u.useRouter)(),I=b.query,$=void 0===I?{}:I,q=(0,s.useState)(parseInt(null==$?void 0:$.page,10)||1),S=q[0],k=q[1],C=(0,s.useState)(d||y.C1.paginationSize),w=C[0],A=C[1];o||(o={item:"createdAt",order:"desc"});var T=(0,s.useState)({item:o.item,order:o.order}),P=T[0],R=T[1],D=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=b.query,t=void 0===e?{}:e;if(n>1?t.page=n:delete t.page,!(Object.keys(t).length>0))return{};var r=Object.keys(t).map(function(e){return"page"===e?"".concat(e,"=").concat(n):"".concat(e,"=").concat(t[e])}).join("&");return"?".concat(r)},F=function(){R({item:o.item,order:o.order}),k(1);var n=D();b.push(n),A(d||y.C1.paginationSize)};(0,s.useImperativeHandle)(e,function(){return{currentPage:S,pageSize:w,sort:P,resetPagination:function(){F()}}});var E=function(n){var e=D(n);r&&b.push(e),k(n),!r&&l&&l()},U=function(n){n&&n.field&&n.sort?(R({item:t.find(function(e){return e.field===n.field}).sortName||n.field||n.item||o.item,order:n.sort||n.order||o.order}),l&&l()):(R({item:o.item,order:o.order}),l&&l())};return(0,a.jsxs)(Z,{containerHeight:m,children:[(0,a.jsx)(j,(0,i.Z)({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:g,sortingMode:"server",onSortModelChange:function(n){return U(n[0])},columns:t,pageSize:w,slots:{columnSortedAscendingIcon:function(){return(0,a.jsx)(v.Z,{})},columnSortedDescendingIcon:function(){return(0,a.jsx)(_.Z,{})},columnUnsortedIcon:function(){return(0,a.jsxs)(f.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,a.jsx)(v.Z,{sx:{marginBottom:"-15px"}}),(0,a.jsx)(_.Z,{})]})},noResultsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:h})})},noRowsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:h})})}}},n)),c&&Math.ceil(c.aggregate.totalCount/w)>1&&(0,a.jsx)(x,{currentPage:S,totalCount:c.aggregate.totalCount,pageSize:w,onPageChange:E})]})});S.propTypes={history:l().bool,initialSort:l().object,loading:l().bool,meta:l().object,refetch:l().func,paginationSize:l().number,noResultsMessage:l().string,columns:l().array.isRequired,rows:l().array.isRequired,autoHeight:l().bool},S.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var Z=(0,h.ZP)(m.Z)(function(n){return{height:n.containerHeight,display:"flex",flexDirection:"column"}}),j=(0,h.ZP)(d.s)(function(n){var e,t=n.theme,a=n.hideHeader,s=(n.rows,n.loading,n.rowHeight),u=n.isPdf;return e={"--DataGrid-overlayHeight":"40px"},(0,r.Z)(e,"&.MuiDataGrid-root",(0,i.Z)({color:t.palette.black.main,border:"none"},u&&{"@media print":{display:"block"}})),(0,r.Z)(e,"& .MuiDataGrid-main",(0,i.Z)({},u&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(e,"& .MuiDataGrid-columnHeaders",(0,o.Z)((0,i.Z)({},a&&{display:"none"}),{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,r.Z)(e,"& .MuiDataGrid-virtualScroller",(0,i.Z)({},a&&{marginTop:"0 !important"},u&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(e,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,r.Z)(e,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(e,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(e,"& .MuiDataGrid-virtualScrollerContent",(0,i.Z)({},u&&{height:"initial !important",minHeight:"initial !important"})),(0,r.Z)(e,"& .MuiDataGrid-virtualScrollerRenderZone",(0,i.Z)({},u&&{position:"relative"})),(0,r.Z)(e,"& .MuiDataGrid-overlayWrapper",(0,r.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,r.Z)(e,"& .MuiDataGrid-row",(0,i.Z)({},u&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,r.Z)(e,"& .MuiDataGrid-row > .MuiDataGrid-cell",(0,i.Z)({},u&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,r.Z)(e,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),e})},20705:function(n,e,t){"use strict";t.d(e,{x:function(){return l}});var r=t(14924),i=t(26042),o=t(69396),a=t(67294),s=t(96486),u=t(46003),c=function(n){try{return JSON.parse(n)}catch(e){return!1}},l=function(n){var e,t,l,d,m,f,p,h,g,v,_,y=n.filters,b=n.newFilters,I=n.initialSort,$=(0,a.useRef)(),x=(0,a.useState)({}),q=x[0],S=x[1],Z=(0,a.useState)({}),j=Z[0],k=Z[1],C=I||{item:"createdAt",order:"desc"},w=(0,r.Z)({},(null===(e=$.current)||void 0===e?void 0:e.sort.item)||C.item,C.inneritem?(0,r.Z)({},C.inneritem,(null===(t=$.current)||void 0===t?void 0:t.sort.order)||C.order):(null===(l=$.current)||void 0===l?void 0:l.sort.order)||C.order);return(0,a.useEffect)(function(){var n=!(0,s.isEqual)(q,y),e=!(0,s.isEqual)(j,b);if(n&&(S(y),null==$||null===(r=$.current)||void 0===r||r.resetPagination()),e&&(k(b),null==$||null===(i=$.current)||void 0===i||i.resetPagination()),(null==$?void 0:null===(t=$.current)||void 0===t?void 0:t.setSort)&&!(n||e)){var t,r,i,o,a,u,c,l,d,m,f,p=(null===(o=$.current)||void 0===o?void 0:null===(a=o.sort)||void 0===a?void 0:a.item)&&(null===(u=$.current)||void 0===u?void 0:null===(c=u.sort)||void 0===c?void 0:c.order)?{item:null===(l=$.current)||void 0===l?void 0:null===(d=l.sort)||void 0===d?void 0:d.item,order:null===(m=$.current)||void 0===m?void 0:null===(f=m.sort)||void 0===f?void 0:f.order}:w;$.current.setSort(p)}},[y,b]),{initialData:(0,o.Z)((0,i.Z)({},y),{newFilters:(null==b?void 0:b.length)>0?b:void 0,limit:(null===(d=$.current)||void 0===d?void 0:d.pageSize)==="Infinity"?null:parseInt(null===(m=$.current)||void 0===m?void 0:m.pageSize,10)||u.C1.paginationSize,offset:((null===(f=$.current)||void 0===f?void 0:f.currentPage)-1||0)*((null===(p=$.current)||void 0===p?void 0:p.pageSize)||u.C1.paginationSize),orderBy:c(null===(h=$.current)||void 0===h?void 0:null===(g=h.sort)||void 0===g?void 0:null===(v=g.item)||void 0===v?void 0:v.replace(/ORDER/i,null===(_=$.current)||void 0===_?void 0:_.sort.order))||w}),initialSort:I,ref:$}}},22186:function(n,e,t){"use strict";t.d(e,{V:function(){return d}});var r=t(26042),i=t(69396),o=t(85893),a=t(67294),s=t(45697),u=t.n(s),c=t(87918),l=t(41796),d=function(n){var e,t=n.chipProps,s=n.tagEntityId,u=n.name,d=n.color,m=n.onDelete,f=(0,a.useMemo)(function(){return m?(0,i.Z)((0,r.Z)({},t),{onDelete:function(n){n.stopPropagation(),m(s)}}):(0,r.Z)({},t)},[t,m,s]);return(0,o.jsx)(c.Z,(0,i.Z)((0,r.Z)({},f),{size:"small",label:u,sx:{fontSize:"11px",color:(e=d,(0,l.mi)(e,"#FFFFFF")>2.5?"#FFFFFF":"#000"),bgcolor:d,borderRadius:"0px 16px 16px 0px"}}))};d.defaultProps={chipProps:{},onDelete:null,color:"#f2f2f2"},d.propTypes={chipProps:u().object,tagEntityId:u().string.isRequired,name:u().string.isRequired,color:u().string.isRequired,onDelete:u().func.isRequired}},28864:function(n,e,t){"use strict";t.d(e,{T:function(){return _}});var r=t(85893),i=t(45697),o=t.n(i),a=t(93946),s=t(97212),u=t(98619),c=t(59334),l=t(51233),d=t(50135),m=t(50594),f=t(40055),p=t(5336),h=t(10166),g=t(67294),v=t(42283),_=function(n){var e=n.tagEntityId,t=n.tagId,i=n.name,o=n.color,c=n.editable,h=n.onDelete,_=n.onColorChange,b=n.onNameChange,I=(0,v.cI)({defaultValues:{name:i,color:o}}),$=I.register,x=I.handleSubmit,q=(0,g.useState)(null),S=q[0],Z=q[1],j=function(){return[{icon:"delete",onClick:function(n){n.stopPropagation(),h(e)},tooltip:"Remove"},{icon:"edit",onClick:function(n){n.stopPropagation(),Z("rename")},tooltip:"Rename"},{icon:"visibility",onClick:function(n){n.stopPropagation(),Z("changeColor")},tooltip:"Change color"}]},k=function(n){n.stopPropagation(),Z(null)},C=function(n){_({tagId:t,color:n.color}),Z(null)},w=function(n){b({tagId:t,name:n.name}),Z(null)};return(0,r.jsx)(s.ZP,{disablePadding:!0,secondaryAction:!c||!S&&(0,r.jsx)(p.C,{icon:"defaultHoriz",actionsData:j}),children:S?({changeColor:function(){return(0,r.jsxs)(l.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"16px",children:[(0,r.jsx)("input",{name:"color",ref:$,type:"color",style:{padding:0,border:"none","background-color":"unset"}}),(0,r.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,r.jsx)(a.Z,{size:"small",color:"danger",onClick:k,children:(0,r.jsx)(m.Z,{})}),(0,r.jsx)(a.Z,{size:"small",color:"success",onClick:x(C),children:(0,r.jsx)(f.Z,{})})]})]})},rename:function(){return(0,r.jsxs)(l.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"16px",children:[(0,r.jsx)(d.Z,{name:"name",inputRef:$,variant:"standard",color:"secondary"}),(0,r.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,r.jsx)(a.Z,{size:"small",color:"danger",onClick:k,children:(0,r.jsx)(m.Z,{})}),(0,r.jsx)(a.Z,{size:"small",color:"success",onClick:x(w),children:(0,r.jsx)(f.Z,{})})]})]})}})[S]():(0,r.jsx)(u.Z,{children:(0,r.jsx)(y,{primary:i,color:o})})},t)};_.defaultProps={onDelete:function(){},onColorChange:function(){},onNameChange:function(){},editable:!0},_.propTypes={tagEntityId:o().string.isRequired,tagId:o().string.isRequired,name:o().string.isRequired,color:o().string.isRequired,editable:o().bool,onDelete:o().func.isRequired,onColorChange:o().func.isRequired,onNameChange:o().func.isRequired};var y=(0,h.Z)(c.Z)(function(n){return n.theme,{"&.MuiListItemText-root .MuiListItemText-primary":{fontWeight:700,color:n.color}}})},48381:function(n,e,t){"use strict";t.d(e,{K:function(){return T}});var r=t(828),i=t(29815),o=t(85893),a=t(45697),s=t.n(a),u=t(50319),c=t(51738),l=t(26042),d=t(69396),m=t(67294),f=t(6812),p=t(11961),h=t(93362),g=t(23776),v=t(5616),_=t(98456),y=t(93946),b=t(78462),I=t(18972),$=t(14564),x=t(51233),q=t(50135),S=t(28864),Z=t(10166),j=t(2845),k=(0,h.D)(),C=function(n){var e=n.entityId,t=(n.getTagsForEntityQuery,n.getTagsForEntityVariables,n.refetchQueries),a=n.entity,s=n.handleDeleteTagEntity,h=(0,j.x)().user,$=(0,m.useState)(null),Z=$[0],C=$[1],A=(0,m.useState)(""),T=A[0],P=A[1],R=(0,m.useState)(""),D=R[0],F=R[1],E=(0,m.useState)(""),U=E[0],M=E[1],L=(0,f.a)(c.BU,{skip:!Z,variables:{entityId:e,entity:a}}),N=L.data,O=(void 0===N?{tags:[]}:N).tags,z=L.loading,G=(0,f.a)(c.gI,{skip:!Z,variables:{entityId:e,entity:a,q:""!==U?"%".concat(U,"%"):null}}),J=G.data,W=(void 0===J?{tags:[]}:J).tags,Q=G.loading,H=(0,r.Z)((0,u.D)(c.LE,{refetchQueries:["GetAllTags"].concat((0,i.Z)(t)),onCompleted:function(){F(""),P(null)}}),2),B=H[0],V=H[1].loading,Y=(0,r.Z)((0,u.D)(c.g$,{refetchQueries:["GetAllTags"].concat((0,i.Z)(t))}),2),K=Y[0],X=Y[1].loading;(0,m.useEffect)(function(){var n=setTimeout(function(){M(D)},500);return function(){return clearTimeout(n)}},[D]);var nn=function(n){n.stopPropagation(),C(n.currentTarget)},ne=function(){C(null)},nt=function(n,t){"string"==typeof t?P({label:t}):t&&t.inputValue?(B({variables:{objects:[{entity:a,entityId:e,Taxonomy:{data:{type:"tags",status:"active",name:t.inputValue,meta:{color:"#0679d8"},isGroup:!1,adminId:h.adminId}}}]}}),P(null)):t&&t.value&&(B({variables:{objects:[{entity:a,entityId:e,taxonomyId:t.value}]}}),P(null))},nr=function(n,e){var t=k(n,e),r=e.inputValue,i=n.some(function(n){return r===n.label});return""===r||i||t.push({inputValue:r,label:'Add "'.concat(r,'"')}),t},ni=function(n){return"string"==typeof n?n:n.inputValue?n.inputValue:n.label},no=function(n){var e;K({variables:{tagId:n.tagId,object:{meta:{color:n.color}}}})},na=function(n){var e;K({variables:{tagId:n.tagId,object:{name:n.name}}})},ns=Boolean(Z),nu=null==W?void 0:W.map(function(n){return{label:n.name,value:n.id}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w,{id:ns?"tags-popover":void 0,open:ns,anchorEl:Z,onClose:ne,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,o.jsxs)(v.Z,{sx:{maxHeight:"80vh",width:"280px",p:"10px",pt:"5px"},children:[(0,o.jsx)(g.Z,{freeSolo:!0,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:nu,value:T,onChange:nt,onInputChange:function(n,e){F(e)},filterOptions:nr,getOptionLabel:ni,renderOption:function(n,e){return(0,o.jsx)(I.Z,(0,d.Z)((0,l.Z)({},n),{children:e.label}))},renderInput:function(n){return(0,o.jsx)(q.Z,(0,d.Z)((0,l.Z)({},n),{variant:"standard",color:"secondary",label:"Search tag",InputProps:(0,d.Z)((0,l.Z)({},n.InputProps),{endAdornment:(0,o.jsxs)(o.Fragment,{children:[Q||V?(0,o.jsx)(_.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))},sx:{pl:"16px",pr:"16px"}}),z||X?(0,o.jsx)(x.Z,{width:"100%",alignItems:"center",p:4,children:(0,o.jsx)(_.Z,{color:"secondary"})}):(0,o.jsx)(b.Z,{children:O.map(function(n){var e;return(0,o.jsx)(S.T,{tagEntityId:n.id,tagId:n.tag.id,name:n.tag.name,color:null===(e=n.tag.meta)||void 0===e?void 0:e.color,onDelete:s,onColorChange:no,onNameChange:na})})})]})}),(0,o.jsx)(y.Z,{color:"black",onClick:nn,children:(0,o.jsx)(p.Z,{sx:{height:"16px",width:"16px"}})})]})};C.defaultProps={entityId:null,entity:null,refetchQueries:[],handleDeleteTagEntity:function(){}},C.propTypes={entityId:s().number,entity:s().string,getTagsForEntityQuery:s().object,getTagsForEntityVariables:s().object,refetchQueries:s().array,handleDeleteTagEntity:s().func};var w=(0,Z.Z)($.ZP)(function(n){return n.theme,{"& .MuiPaper-root":{borderRadius:"12px"}}}),A=t(11975),T=function(n){var e=n.row,t=n.refetchQueries,a=n.entity,s=(0,r.Z)((0,u.D)(c.cS,{refetchQueries:["GetTaskTags"].concat((0,i.Z)(t))}),1)[0],l=function(n){s({variables:{tagEntityId:n}})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A.P,{tags:e.tags,title:e.title,handleDeleteTagEntity:l}),(0,o.jsx)(C,{entityId:e.id,refetchQueries:t,handleDeleteTagEntity:l,entity:a})]})};T.propTypes={row:s().object,refetchQueries:s().array},T.defaultProps={row:{},displayOnly:!1,refetchQueries:[],handleDeleteTagEntity:function(){}}},11975:function(n,e,t){"use strict";t.d(e,{P:function(){return f}});var r=t(85893),i=t(67294),o=t(45697),a=t.n(o),s=t(15861),u=t(14564),c=t(78462),l=t(51233),d=t(22186),m=t(28864),f=function(n){var e=n.tags,t=(n.title,n.handleDeleteTagEntity),o=(0,i.useState)(null),a=o[0],f=o[1],p=null==e?void 0:e.slice(0,5),h=(null==e?void 0:e.length)-(null==p?void 0:p.length),g=Boolean(a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{direction:"row",spacing:1,children:p.map(function(n,e){var i;return(0,r.jsx)(d.V,{tagEntityId:n.id||e,name:n.tag.name,color:null===(i=n.tag.meta)||void 0===i?void 0:i.color,onDelete:t})})}),h>0&&(0,r.jsxs)(s.Z,{fontWeight:700,ml:1,onMouseEnter:function(n){f(n.currentTarget),n.stopPropagation()},children:["+",h]}),(0,r.jsx)(u.ZP,{id:g?"tags-in-table-popover":void 0,open:g,anchorEl:a,onClose:function(){return f(null)},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,r.jsx)(c.Z,{children:null==e?void 0:e.map(function(n){var e;return(0,r.jsx)(m.T,{tagEntityId:n.id,tagId:n.tag.id,name:n.tag.name,color:null===(e=n.tag.meta)||void 0===e?void 0:e.color,editable:!1},n.tag.id)})})})]})};f.propTypes={tags:a().object,title:a().string},f.defaultProps={tags:{},displayOnly:!1,refetchQueries:[],handleDeleteTagEntity:function(){}}},57179:function(n,e,t){"use strict";t.d(e,{r:function(){return h}});var r=t(26042),i=t(69396),o=t(828),a=t(85893),s=t(67294),u=t(42283),c=t(73359),l=t(23776),d=t(98456),m=t(50135),f=t(87918),p=t(51738),h=function(n){var e=n.control,t=(0,s.useState)(""),h=t[0],g=t[1],v=(0,s.useState)(""),_=v[0],y=v[1],b=(0,o.Z)((0,c.t)(p.lx,{variables:{q:""!==_?"%".concat(_,"%"):null}}),2),I=b[0],$=b[1],x=$.loading,q=$.data,S=(void 0===q?{items:[]}:q).items;return(0,s.useEffect)(function(){var n=setTimeout(function(){y(h)},500);return function(){return clearTimeout(n)}},[h]),(0,a.jsx)(u.Qr,{control:e,name:"tags",render:function(n){var e=n.value,t=n.onChange;return(0,a.jsx)(l.Z,{multiple:!0,limitTags:6,color:"secondary",onOpen:function(){return I()},options:S,value:e||[],inputValue:h,onChange:function(n,e){t(e)},onInputChange:function(n,e){g(e)},getOptionLabel:function(n){return n.label},renderTags:function(n,e){return n.map(function(n,t){return(0,a.jsx)(f.Z,(0,r.Z)({size:"small",label:n.label},e({index:t})),t)})},renderInput:function(n){return(0,a.jsx)(m.Z,(0,i.Z)((0,r.Z)({},n),{variant:"standard",color:"secondary",label:"Select tags",InputProps:(0,i.Z)((0,r.Z)({},n.InputProps),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[x?(0,a.jsx)(d.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))}})}})}},66137:function(n,e,t){"use strict";t.d(e,{Y:function(){return r}});var r=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Job",t="";return(null==n?void 0:n.length)&&(t="\n      Taxonomy: {\n      _and: [\n        { entity: { _eq: ".concat(e,' } }\n        {\n          Taxonomy: {\n            status: { _eq: "active" }\n            _and: [{ id: { _in: [').concat(n,'] } }, { type: { _eq: "tags" } }]\n          }\n        }\n      ]\n    }\n  ')),t}},51738:function(n,e,t){"use strict";t.d(e,{Aw:function(){return $},BU:function(){return g},C3:function(){return I},LE:function(){return _},Zm:function(){return h},cS:function(){return y},g$:function(){return b},gI:function(){return p},lx:function(){return v}});var r=t(7297),i=t(75063);function o(){var n=(0,r.Z)(['\n  query GetTagsForEntity($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    tags: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "tags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']);return o=function(){return n},n}function a(){var n=(0,r.Z)(["\n  mutation CreateTag($objects: [Taxonomy_insert_input!]!) {\n    insert_Taxonomy(objects: $objects) {\n      returning {\n        id\n        name\n        meta\n      }\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "tags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']);return s=function(){return n},n}function u(){var n=(0,r.Z)(['\n  query GetTagsForSelect($q: String, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "tags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']);return u=function(){return n},n}function c(){var n=(0,r.Z)(["\n  mutation CreateTagsAgainstEntity($objects: [Taxonomy_Entity_insert_input!]!) {\n    insert_Taxonomy_Entity(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,r.Z)(["\n  mutation DeleteTagAgainstEntity($tagEntityId: Int!) {\n    delete_Taxonomy_Entity_by_pk(id: $tagEntityId) {\n      id\n      taxonomyId\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,r.Z)(["\n  mutation UpdateTagAgainstEntity($tagId: Int!, $object: Taxonomy_set_input!) {\n    update_Taxonomy_by_pk(pk_columns: { id: $tagId }, _set: $object) {\n      id\n      name\n      meta\n    }\n  }\n"]);return d=function(){return n},n}function m(){var n=(0,r.Z)(["\n  mutation CreateTagsAgainstEntityWithFollowing($objects: [Taxonomy_Entity_insert_input!]!) {\n    insert_Taxonomy_Entity(objects: $objects) {\n      returning {\n        id\n        taxonomyId\n      }\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,r.Z)(["\n  mutation DeleteTagAgainstEntityWithFollowing($where: Taxonomy_Entity_bool_exp!) {\n    delete_Taxonomy_Entity(where: $where) {\n      returning {\n        id\n        taxonomyId\n      }\n    }\n  }\n"]);return f=function(){return n},n}var p=(0,i.Ps)(o()),h=(0,i.Ps)(a()),g=(0,i.Ps)(s()),v=(0,i.Ps)(u()),_=(0,i.Ps)(c()),y=(0,i.Ps)(l()),b=(0,i.Ps)(d()),I=(0,i.Ps)(m()),$=(0,i.Ps)(f())},75327:function(n,e,t){"use strict";t.d(e,{$E:function(){return F},AX:function(){return q},I4:function(){return x},JA:function(){return Z},MT:function(){return A},Px:function(){return k},WF:function(){return j},ZA:function(){return M},a8:function(){return C},fA:function(){return D},fo:function(){return S},ge:function(){return U},iM:function(){return R},nE:function(){return T},nh:function(){return P},r1:function(){return w},tW:function(){return L},uz:function(){return E}});var r=t(7297),i=t(75063);function o(){var n=(0,r.Z)(["\n  mutation InsertAccountUser($objects: [Account_User_insert_input!]!) {\n    insert_Account_User(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,r.Z)(["\n  mutation UpdateUser(\n    $id: Int!\n    $accountUserId: Int!\n    $accountUserChanges: Account_User_set_input\n    $changes: User_set_input\n    $updateAccountUser: Boolean!\n  ) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _set: $accountUserChanges)\n      @include(if: $updateAccountUser) {\n      id\n    }\n    update_User_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(["\n  query GetUsers(\n    $accountId: Int\n    $accountType: String\n    $date: timestamptz\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: User_order_by!\n    $status: String\n  ) {\n    users: User(\n      limit: $limit\n      offset: $offset\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [\n          { email: { _ilike: $q } }\n          { nameFirst: { _ilike: $q } }\n          { nameLast: { _ilike: $q } }\n        ]\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n    meta: User_aggregate(\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,r.Z)(["\n  query GetUser($id: Int!) {\n    user: User_by_pk(id: $id) {\n      id\n      fullName\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n      }\n    }\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,r.Z)(["\n  query CheckDuplicateEmail($email: String!) {\n    users: User_public(where: { email: { _eq: $email } }) {\n      id\n      nameFirst\n      nameLast\n      email\n      phone\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,r.Z)(["\n  fragment UserFields on User {\n    id\n    email\n    nameFirst\n    nameLast\n    fullName\n    phone\n    status\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,r.Z)(["\n  mutation SendGoogleAuthCode($code: String!, $id: Int!, $type: String!) {\n    createGoogleToken(code: $code, id: $id, type: $type) {\n      success\n      tokens\n      error\n    }\n  }\n"]);return d=function(){return n},n}function m(){var n=(0,r.Z)(["\n  mutation GenerateMSURL($type: String!, $id: Int!) {\n    genenrateMSURL(id: $id, type: $type) {\n      url\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,r.Z)(["\n  mutation signoutMS($id: Int!, $type: String!, $email: String!) {\n    signoutMS(id: $id, type: $type, email: $email) {\n      error\n      msId\n      success\n    }\n  }\n"]);return f=function(){return n},n}function p(){var n=(0,r.Z)(["\n  query getAccountMeta($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      meta\n    }\n  }\n"]);return p=function(){return n},n}function h(){var n=(0,r.Z)(["\n  query user($id: Int!) {\n    user: User_by_pk(id: $id) {\n      meta\n      invoiceThreshold\n      quoteThreshold\n    }\n  }\n"]);return h=function(){return n},n}function g(){var n=(0,r.Z)(["\n  query GetAccountUserMeta($userId: Int!, $accountId: Int!) {\n    accountUser: Account_User(where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }) {\n      meta\n    }\n  }\n"]);return g=function(){return n},n}function v(){var n=(0,r.Z)(["\n  mutation UpdateAccountUserByUserIdAccoutId(\n    $userId: Int!\n    $accountId: Int!\n    $changes: Account_User_set_input!\n  ) {\n    update_Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n      _set: $changes\n    ) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return v=function(){return n},n}function _(){var n=(0,r.Z)(["\n  mutation updateAccount($accountId: Int!, $set: Account_set_input!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $set) {\n      id\n    }\n  }\n"]);return _=function(){return n},n}function y(){var n=(0,r.Z)(["\n  mutation updateUserMeta($userId: Int!, $meta: jsonb!) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: { meta: $meta }) {\n      id\n      meta\n    }\n  }\n"]);return y=function(){return n},n}function b(){var n=(0,r.Z)(['\n  query userDevices($accountId: Int!) {\n    users: User(\n      where: {\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        UserDevices: { status: { _eq: "active" } }\n        status: { _eq: "active" }\n      }\n    ) {\n      id\n      fullName\n      devices: UserDevices(\n        order_by: { updatedAt: desc_nulls_last }\n        where: { status: { _eq: "active" } }\n        limit: 1\n      ) {\n        id\n        playerId\n      }\n    }\n  }\n']);return b=function(){return n},n}function I(){var n=(0,r.Z)(['\n  query GetAccountLocations($accountId: Int, $limit: Int, $offset: Int) {\n    location: Location(\n      offset: $offset\n      limit: $limit\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      id\n      name\n      accountLocations: Account_Locations {\n        id\n      }\n      addresses: Addresses(where: { entity: { _eq: "Location" }, registered: { _eq: true } }) {\n        id\n        status\n        address: Address {\n          id\n          name\n          addressLine1\n          postCode\n        }\n      }\n    }\n    meta: Location_aggregate(\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return I=function(){return n},n}function $(){var n=(0,r.Z)(["\n  mutation InsertUserAccountLocations(\n    $accountUserId: Int!\n    $objects: [User_Account_Location_insert_input!]!\n  ) {\n    delete_User_Account_Location(where: { accountUserId: { _eq: $accountUserId } }) {\n      affected_rows\n    }\n    insert_User_Account_Location(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"]);return $=function(){return n},n}var x=(0,i.Ps)(o()),q=(0,i.Ps)(a()),S=(0,i.Ps)(s()),Z=(0,i.Ps)(u()),j=(0,i.Ps)(c()),k=(0,i.Ps)(l()),C=(0,i.Ps)(d()),w=(0,i.Ps)(m()),A=(0,i.Ps)(f()),T=(0,i.Ps)(p()),P=(0,i.Ps)(h()),R=(0,i.Ps)(g()),D=(0,i.Ps)(v()),F=(0,i.Ps)(_()),E=(0,i.Ps)(y()),U=(0,i.Ps)(b()),M=(0,i.Ps)(I()),L=(0,i.Ps)($())},9492:function(n,e,t){"use strict";t.d(e,{S:function(){return r}});var r=function(n,e){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=e,t.href=n,t.click(),document.body.removeChild(t)):location.replace(n)}},59938:function(n,e,t){"use strict";t.d(e,{X:function(){return p}});var r=t(14924),i=t(82670),o=t(828),a=t(7297),s=t(67294),u=t(6812),c=t(50319),l=t(75063),d=t(18586);function m(){var n=(0,a.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,a.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return f=function(){return n},n}function p(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",a=(0,d.q)().user,l=(0,s.useState)(function(){try{switch(t){case"network":case"state":return e;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(n))||e}}catch(r){return e}}),m=l[0],f=l[1],p=function(e){try{var o=(0,i.Z)(e,Function)?e(m):e;switch(f(o),t){case"network":v({variables:{accountUserId:null==a?void 0:a.accountUserId,filters:(0,r.Z)({},n,o)}});break;case"sessionStorage":window.sessionStorage.setItem(n,JSON.stringify(o))}}catch(s){}};(0,u.a)(h,{variables:{accountUserId:null==a?void 0:a.accountUserId},skip:"network"!==t,onCompleted:function(t){var r=t.accountUser;r&&f(r.filters[n]||e)}});var v=(0,o.Z)((0,c.D)(g),1)[0];return[m,p]}var h=(0,l.Ps)(m()),g=(0,l.Ps)(f())},97768:function(n,e,t){"use strict";t.d(e,{x:function(){return r}});var r=[{text:"Reactive",value:"reactive",context:"#2EE6CA"},{text:"Planned Maintenance",value:"ppm",context:"#D67EFF"},{text:"Quote",value:"quote",context:"#7D7"},{text:"Compliance",value:"cppm",context:"#CC7429"}]},31714:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return nm}});var r=t(85893),i=t(11163),o=t.n(i),a=t(58849),s=t(26042),u=t(69396),c=t(828),l=t(67294),d=t(6812),m=t(73359),f=t(11057),p=t(98456),h=t(90629),g=t(51233),v=t(15861),_=t(81261),y=t(65817),b=t(30381),I=t.n(b),$=t(57460),x=t.n($),q=t(45697),S=t.n(q),Z=t(18586),j=t(2845),k=t(20705),C=t(9492),w=t(86886),A=t(11994),T=t(50135),P=t(61730),R=t(42283),D=t(10166),F=t(33754),E=t(59938),U=t(22244),M=t(92148),L=t(4972),N=t(78232),O=t(57179),z=t(48580),G=function(n){var e=n.open,t=n.setOpen,i=n.initialFilters,o=(n.filters,n.setFilters),a=(0,P.Z)("(max-width: 400px)")?4:0,p=(0,j.x)(),h=p.hasRole,v=p.user,_=(0,c.Z)((0,E.X)("form_data_".concat(i.filterType),i),2),y=_[0],b=_[1],I=(0,R.cI)({defaultValues:y}),$=I.control,x=I.handleSubmit,q=I.register,S=I.reset,Z=I.watch,k=I.setValue,C=I.getValues,A=Z("startDate"),D=(0,l.useState)(""),F=D[0],G=D[1],H=U.iz.map(function(n){return h("supplier")?{label:n.supplierText,value:n.value}:h("customer")?{label:n.customerText,value:n.value}:{label:n.text,value:n.value}}).filter(function(n){return null!==n.label}),B=(0,c.Z)((0,m.t)(L.yR),2),V=B[0],Y=B[1],K=Y.loading,X=Y.data,nn=(void 0===X?{items:[]}:X).items,ne=(0,c.Z)((0,m.t)(L.SW),2),nt=ne[0],nr=ne[1],ni=nr.loading,no=nr.data,na=(void 0===no?{items:[]}:no).items,ns=(0,c.Z)((0,m.t)(L._d),2),nu=ns[0],nc=ns[1],nl=nc.loading,nd=nc.data,nm=(void 0===nd?{items:[]}:nd).items,nf=(0,c.Z)((0,m.t)(L.by,{variables:{where:{type:{_eq:"supplier"}}}}),2),np=nf[0],nh=nf[1],ng=nh.loading,nv=nh.data,n_=(void 0===nv?{items:[]}:nv).items,ny=(0,d.a)(L.K4,{skip:!e,variables:{accountId:v.accountId,limit:50,offset:0,q:""!==F?"%".concat(F,"%"):null}}),nb=ny.data,nI=(void 0===nb?{items:[]}:nb).items,n$=ny.loading;(0,l.useEffect)(function(){var n=H.filter(function(n){return"quoteOffered"===n.value});k("status",A?n:[])},[A,k,H]);var nx=function(n){try{var e,r,a,u,c,l,d,m,f,p={locationId:null!==(f=null===(e=n.location)||void 0===e?void 0:e.value)&&void 0!==f?f:null,startDate:n.startDate,endDate:n.endDate,status:null===(r=n.status)||void 0===r?void 0:r.map(function(n){return n.value}),customerId:null===(a=n.customerId)||void 0===a?void 0:a.value,supplierId:null===(u=n.supplierId)||void 0===u?void 0:u.value,userId:null===(c=n.userId)||void 0===c?void 0:c.value,tags:null===(l=n.tags)||void 0===l?void 0:l.map(function(n){return n.value}),customerManagerId:null===(d=n.customerManager)||void 0===d?void 0:d.value},h=n.q;if(h){p.q="%".concat(h,"%")||0;var g=/^\d+$/.test(h);"id"in i&&(p.id=g?Number(h):null),"meta"in i&&(p.meta=g?{invoiceNumbers:[h]}:null),"jobNumber"in i&&(p.jobNumber=g?String(h):null,p.invoiceNumber=g?Number(h):null)}(null===(m=p.status)||void 0===m?void 0:m.length)&&(p.isChangedStatusSelect=!0),o(function(n){return(0,s.Z)({},n,p)});var v=C();b(function(n){return(0,s.Z)({},n,v)})}finally{t(!1)}},nq=function(){o(i),S(i),t(!1)};return(0,r.jsx)(J,{keepMounted:!0,open:e,onClose:function(){return t(!1)},children:(0,r.jsx)("form",{onSubmit:x(nx),children:(0,r.jsx)(W,{children:(0,r.jsxs)(w.ZP,{container:!0,rowGap:4,children:[(0,r.jsx)(w.ZP,{container:!0,children:(0,r.jsx)(w.ZP,{item:!0,xs:12,children:(0,r.jsx)(T.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Search...",name:"q",inputRef:q})})}),(0,r.jsxs)(w.ZP,{container:!0,columnSpacing:4,rowGap:a,children:[(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(R.Qr,{name:"startDate",control:$,render:function(n){return(0,r.jsx)(Q,(0,u.Z)((0,s.Z)({},n),{label:"Quote offered date",renderInput:function(n){return(0,r.jsx)(T.Z,(0,u.Z)((0,s.Z)({},n),{variant:"standard"}))}}))}})}),(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,rowGap:a,children:(0,r.jsx)(R.Qr,{name:"endDate",control:$,render:function(n){return(0,r.jsx)(Q,(0,u.Z)((0,s.Z)({},n),{label:"Quote due date",renderInput:function(n){return(0,r.jsx)(T.Z,(0,u.Z)((0,s.Z)({},n),{variant:"standard"}))}}))}})})]}),(0,r.jsxs)(w.ZP,{container:!0,columnSpacing:4,rowGap:a,children:[(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(R.Qr,{name:"status",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(N.F,{disabled:Boolean(A),multiple:!0,limitTags:1,value:e,onChange:function(n,e){return t(e)},label:"Select status",options:H})}})}),!h(["customer","supplier"])&&(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(R.Qr,{name:"customerId",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(N.F,{value:e,onChange:function(n,e){return t(e)},label:"Select customer",loading:ni,onOpen:function(){return nt()},options:na})}})}),h(M.n)&&(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(R.Qr,{name:"userId",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(N.F,{value:e,onChange:function(n,e){return t(e)},label:"Select user",loading:K,onOpen:function(){return V()},options:nn})}})})]}),(0,r.jsxs)(w.ZP,{container:!0,columnSpacing:4,rowGap:a,children:[(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(R.Qr,{name:"location",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(N.F,{value:e,onChange:function(n,e){return t(e)},label:"Select location",loading:nl,onOpen:function(){return nu()},options:nm})}})}),h("admin")&&(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(O.r,{control:$})})]}),(0,r.jsx)(w.ZP,{container:!0,columnSpacing:4,rowGap:a,children:h("admin")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(R.Qr,{name:"supplierId",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(N.F,{disabled:A,value:e,onChange:function(n,e){return t(e)},label:"Select supplier",loading:ng,onOpen:function(){return np()},options:n_})}})}),(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(R.Qr,{name:"customerManager",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(z.q,{value:e,onChange:function(n,e){return t(e)},loading:n$,options:nI,setSearch:G,textFieldProps:{color:"secondary",variant:"standard",label:"Select account manager"}})}})})]})}),(0,r.jsx)(w.ZP,{container:!0,item:!0,xs:12,children:(0,r.jsxs)(g.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,r.jsx)(f.Z,{variant:"contained",color:"danger",onClick:function(){return nq()},children:"Cancel"}),(0,r.jsx)(f.Z,{variant:"contained",color:"secondary",type:"submit",children:"Search"})]})})]})})})})};G.defaultProps={open:!1,setOpen:function(){},initialFilters:{},filters:{},setFilters:function(){}},G.propTypes={open:S().bool,setOpen:S().func,initialFilters:S().object,filters:S().object,setFilters:S().func};var J=(0,D.Z)(A.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),W=(0,D.Z)(h.Z)(function(){return{padding:"24px",maxWidth:"700px",maxHeight:"100vh",overflowY:"scroll"}}),Q=(0,D.Z)(F.M)(function(){return{"&.MuiFormControl-root.MuiTextField-root":{width:"100%"}}}),H=t(29815),B=t(97768),V=t(42608),Y=t(26576),K=function(n){var e=n.data,t=n.isCSV,r=n.hasRole,i=r("admin"),o=r("customer"),a=r("supplier");return e.map(function(n){var e,r,c,l,d,m,f,p,h,g,v,_,y,b,$,x,q=(0,H.Z)(U.iz).find(function(e){return e.value===n.status})||{text:"Accepted",supplierText:"Accepted",customerText:"Accepted"},S=q.text,Z=q.supplierText,j=q.customerText,k=S;o?k=j:a&&(k=Z);var C,w=((0,H.Z)(B.x).find(function(e){return e.value===n.type})||{text:"Quote"}).text,A=n.manager?"".concat(n.manager.nameFirst," ").concat(n.manager.nameLast):"Unassigned",T=n.scheduledAt?I()(n.scheduledAt,!0).format("YYYY-MM-DD"):"-",P=t&&(i||o)?(null===(e=n.sublocation)||void 0===e?void 0:e.name)||"-":void 0;return(0,u.Z)((0,s.Z)({id:n.id,description:(null==n?void 0:n.description)?null==n?void 0:n.description:"-",number:n.number,type:w,status:n.status,propertyId:null===(r=n.location)||void 0===r?void 0:r.id,managerId:null===(c=n.manager)||void 0===c?void 0:c.id,customerId:null===(l=n.customer)||void 0===l?void 0:l.id,supplierId:n.supplier?n.supplier.id:"",siteVisitStart:n.siteVisitStart,siteVisitEnd:n.siteVisitEnd,siteVisitWeekends:n.siteVisitWeekends,service:(null===(d=n.service)||void 0===d?void 0:d.name)||"-",manager:A,location:(null===(m=n.location)||void 0===m?void 0:m.name)||"-",property:(null===(f=n.location)||void 0===f?void 0:f.name)||"-",sublocation:P,tags:null==n?void 0:n.tags,customer:(null===(p=n.customer)||void 0===p?void 0:p.name)||"-",customerManager:(null===(h=n.customer)||void 0===h?void 0:null===(g=h.manager)||void 0===g?void 0:g.fullName)||"-"},!t&&{customerManagerId:null===(v=n.customer)||void 0===v?void 0:null===(_=v.manager)||void 0===_?void 0:_.id}),{acceptSupplier:n.supplier?n.supplier.name:"-",offeredSupplier:(null==n?void 0:null===(y=n.quotations)||void 0===y?void 0:y.length)>0?(C=n.quotations,t?C.map(function(n){var e;return null==n?void 0:null===(e=n.supplier)||void 0===e?void 0:e.name}).join(" / "):C):[],quotations:"".concat((null===(b=n.quotations)||void 0===b?void 0:b.length)||0,"/").concat(n.quoteNumber),received:"".concat(null===($=n.quotations||[])||void 0===$?void 0:$.reduce(function(n,e){return"supplierQuoteComplete"===e.status?n+1:n},0),"/").concat((null===(x=n.quotations)||void 0===x?void 0:x.length)||0),range:X(n.quotations),due:I()(n.quoteDue).format("YYYY-MM-DD"),scheduleDate:T,date:I()(n.createdAt).format("YYYY-MM-DD"),statusText:k,quoted:n.quoted||!1,quotationsId:n.quotations[0]&&n.quotations[0].id,actions:""})})},X=function(n){var e=null;if(n.length>1){var t,r,i=n.map(function(n){var e;return null===(e=n.lineItems)||void 0===e?void 0:e.reduce(function(n,e){return n+(e.total||0)*e.qty},0)});e={high:(t=Math).max.apply(t,(0,H.Z)(i||[])),low:(r=Math).min.apply(r,(0,H.Z)(i||[]))}}return e},nn=function(n){var e=n.variables,t=n.user,r=n.queryParams,i=n.hasRole,o=e.limit,a=e.offset,c=e.orderBy,l=e.q,d=e.status,m=e.userId,f=e.asAt,p=e.locationId,h=e.managerId,g=e.tagsWhere,v=r.hasOwnProperty("tileName");if(!e.isChangedStatusSelect)switch(r.show){case"unsent":e.status=["quoteOffered","quoteNew"];break;case"unsentQuote":e.status=["quoteOffered","quoteReceived"];break;case"overdueQuote":e.status=["quoteNew","quoteOffered","quoteReceived","quoteSent"];break;default:e.status=r.show}if(v){var _=m||+r.userId,y=+r.accountId;return i(["customer","supplier"])&&(_=t.id,y=t.accountId),{query:(0,V.Z)({tagsWhere:g}),variables:(0,u.Z)((0,s.Z)({},e),{accountId:y,locationId:p||r.locationId,managerId:h||r.managerId,asAt:f,tileName:null==r?void 0:r.tileName,monthStart:e.monthStart,dayStart:e.todayStart,yearStart:e.yearStart,adminId:null==t?void 0:t.adminId,userId:_})}}return"supplier"===t.accountType?{query:Y.L,variables:(0,s.Z)({limit:o,offset:a,orderBy:c,q:l,status:d},e)}:{query:(0,Y.w)({tagsWhere:g}),variables:(0,s.Z)({},e)}},ne=t(45416),nt=t(15033),nr=t(5336),ni=t(63139),no=t(75832),na=t(12547),ns=t(48381),nu=t(66137),nc=function(n){var e,t,a,b,$,q=n.title,S=n.subtitle,w=n.initialFilters,A=(0,Z.q)(),T=(0,j.x)(),P=T.hasRole,R=T.user,D=(0,i.useRouter)().query,F=(0,l.useState)((0,s.Z)({},w)),E=F[0],U=F[1],M=(0,l.useState)(!1),L=M[0],N=M[1],O=(0,l.useState)(!1),z=O[0],J=O[1],W=null===(e=A.admin)||void 0===e?void 0:null===(t=e.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,Q=null===(a=A.admin)||void 0===a?void 0:null===(b=a.jobSetting)||void 0===b?void 0:b.jobNumberSuffix,H=P("admin"),B=P("supplier"),V=P(["admin","customer"]),Y=P(["admin","supplier"]),X=(0,k.x)({filters:E}),nc=X.initialData,nl=X.ref,nd=nn({variables:(0,u.Z)((0,s.Z)({},nc),{monthStart:I()(D.asAt).startOf("month"),todayEnd:I()(D.asAt).endOf("day"),todayStart:I()(D.asAt).startOf("day"),yearStart:I()(D.asAt).startOf("year"),asAt:I()(D.asAt).endOf("day"),tagsWhere:(0,nu.Y)(nc.tags)}),user:R,queryParams:D,hasRole:P}),nm=nd.query,nf=nd.variables;"Accepted"===nf.status?(nf.type="reactive",delete nf.status):delete nf.type;var np=(0,d.a)(nm,{variables:nf}),nh=np.data,ng=void 0===nh?{quotes:[],meta:{aggregate:{totalCount:0}}}:nh,nv=ng.quotes,n_=ng.meta,ny=np.loading,nb=np.refetch,nI=(0,c.Z)((0,m.t)(nm,{variables:(0,u.Z)((0,s.Z)({},nf),{limit:(null==n_?void 0:null===($=n_.aggregate)||void 0===$?void 0:$.totalCount)||150}),onCompleted:function(n){var e=n.quotes;try{var t=x().unparse(nS(e,!0)),r="data:application/octet-stream,"+encodeURIComponent(t);(0,C.S)(r,"quotes.csv")}finally{J(!1)}},skip:!0}),1)[0],n$=function(n){n.stopPropagation(),J(!0),nI()},nx=function(n){var e=[];return H&&(e.push({context:"secondary",icon:"edit",onClick:function(e){return o().push("/dashboard/issues/manage?id=".concat(n.number,"&quoted=1"))},tooltip:"Edit"}),e.push({context:"secondary",icon:"info",onClick:function(){return o().push("/dashboard/issues/view?id=".concat(n.number))},tooltip:"Info"})),e},nq=function(n){n.stopPropagation(),o().push("/dashboard/issues/manage?quoted=1")},nS=function(n,e){return K({data:n,isCSV:e,hasRole:P})};return(0,r.jsxs)(g.Z,{width:"100%",spacing:2,sx:{height:"100%"},children:[(0,r.jsxs)(g.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(f.Z,{variant:"contained",startIcon:(0,r.jsx)(_.Z,{}),onClick:function(){return N(!0)},children:"Filters"}),(0,r.jsxs)(g.Z,{direction:"row",spacing:2,children:[H&&(0,r.jsx)(f.Z,{variant:"contained",color:"secondary",onClick:nq,children:"Create Quote"}),!(0,ni.s)()&&(0,r.jsx)(f.Z,{startIcon:!z&&(0,r.jsx)("img",{src:"/static/icons/csv.svg"}),disabled:z,variant:"contained",color:"success",onClick:n$,children:z?(0,r.jsx)(p.Z,{size:20,color:"secondary"}):"Export Quote"})]})]}),(0,r.jsxs)(h.Z,{sx:{paddingTop:"16px",paddingBottom:"16px",height:"calc(100% - 52px)"},children:[(0,r.jsxs)(g.Z,{children:[(0,r.jsx)(v.Z,{ml:2,variant:"h5",sx:{fontWeight:600},children:q}),S&&(0,r.jsx)(v.Z,{typography:"subtitle1",ml:2,children:S})]}),(0,r.jsx)(G,{open:L,setOpen:N,initialFilters:w,filters:E,setFilters:U}),(0,r.jsx)(nt.i,{autoHeight:!1,loading:ny,ref:nl,columns:[{sortable:!0,minWidth:100,field:"id",headerName:"ID",sortName:"id",renderCell:function(n){var e=n.row;return(0,r.jsx)(ne.D,{id:e.id,number:e.number,numberPrefix:W,numberSuffix:Q,status:e.status,openCanvas:!0,type:e.type,isQuote:e.quoted})}},{sortable:!1,flex:1,minWidth:80,field:"type",headerName:"Type",sortName:"type"},{minWidth:300,field:"tags",headerName:"Tags",sortable:!1,flex:1,renderCell:function(n){var e=n.row;return(0,r.jsx)(ns.K,{row:e,refetchQueries:["GetQuotes","GetDashboardList"],entity:"Job"})}},{sortable:!1,flex:1,minWidth:180,field:"description",headerName:"Description"},{sortable:!0,hide:!H,sortName:'{"Manager": {"nameFirst": "ORDER"}}',flex:1,minWidth:180,field:"manager",headerName:"Assigned to",renderCell:function(n){var e=n.row;return(0,r.jsx)(na.r,{color:"secondary",href:"/dashboard/users/view?id=".concat(e.managerId),children:e.manager})}},{sortable:!0,hide:!V,flex:1,minWidth:180,field:"location-admin-customer",headerName:"Location",sortName:'{"Location": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,r.jsx)(na.r,{color:"secondary",href:"/dashboard/properties/view?id=".concat(e.propertyId),children:e.location})}},{sortable:!0,hide:V,flex:1,minWidth:180,field:"location",headerName:"Location",sortName:'{"Location": {"name": "ORDER"}}'},{sortable:!0,hide:!H,flex:1,minWidth:180,field:"customer",headerName:"Customer",sortName:'{"Customer": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,r.jsx)(na.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(e.customerId),children:e.customer})}},{minWidth:180,flex:1,field:"customerManager",headerName:"Account Manager",sortName:'{"Customer": {"Manager": {"fullName": "ORDER"}}}',renderCell:function(n){var e=n.row;return(0,r.jsx)(na.r,{noWrap:!e.customerManagerId,color:"secondary",href:"/dashboard/users/view?id=".concat(e.customerManagerId),children:e.customerManager})}},{sortable:!0,hide:!H&&!B,flex:1,minWidth:180,field:"acceptSupplier",headerName:"Accepted Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,r.jsx)(na.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(e.supplierId),children:e.acceptSupplier})}},{sortable:!0,hide:!H&&!B,flex:1,minWidth:180,field:"offeredSupplier",headerName:"Offered Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(n){var e,t=n.row;return(0,r.jsx)(r.Fragment,{children:(null==t?void 0:null===(e=t.offeredSupplier)||void 0===e?void 0:e.length)>0?(0,r.jsx)(g.Z,{children:((null==t?void 0:t.offeredSupplier)||[]).map(function(n){var e,t;return(0,r.jsx)(na.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null==n?void 0:null===(e=n.supplier)||void 0===e?void 0:e.id),children:null==n?void 0:null===(t=n.supplier)||void 0===t?void 0:t.name})})}):"-"})}},{sortable:!1,hide:!H,flex:1,minWidth:100,field:"quotations",headerName:"Quotations"},{sortable:!1,hide:!H&&!B,flex:1,minWidth:80,field:"received",headerName:"Quotations (Received)"},{sortable:!1,hide:!H,flex:1,minWidth:140,field:"range",headerName:"Quotations Range",renderCell:function(n){var e=n.row.range;return e?(0,r.jsxs)(g.Z,{children:[(0,r.jsxs)(v.Z,{sx:{whiteSpace:"nowrap"},children:["high: ",(0,no.T)(e.high)]}),(0,r.jsxs)(v.Z,{sx:{whiteSpace:"nowrap"},children:["low: ",(0,no.T)(e.low)]})]}):"N/A"}},{sortable:!0,headerName:"Quote Due",flex:1,minWidth:120,field:"due",sortName:"quoteDue",renderCell:function(n){var e=n.row,t=I()().format("YYYY-MM-DD"),i="Quote"===e.type,o=e.status.includes("quoteSent");if(i&&e.due<t&&!o)return(0,r.jsxs)(g.Z,{alignItems:"center",children:[(0,r.jsx)(y.Z,{color:"error",sx:{height:"20px"}}),(0,r.jsx)(v.Z,{children:e.due})]})}},{flex:1,minWidth:120,field:"scheduleDate",headerName:"Scheduled",sortable:!0,sortName:"scheduledAt"},{flex:1,minWidth:120,field:"date",headerName:"Created",sortable:!0,sortName:"createdAt"},{flex:1,minWidth:140,field:"statusText",headerName:"Status",sortable:!0,sortName:"status",renderCell:function(n){var e=n.row;return(null==e?void 0:e.offeredSupplier.length)>0&&(null==e?void 0:e.offeredSupplier.every(function(n){return"quotationRejected"===n.status}))?"Rejected":e.statusText}},{sortable:!1,hide:!H,flex:1,field:"actions",headerName:"",maxWidth:50,renderCell:function(n){var e=n.row;return(0,r.jsx)(nr.C,{actionsData:nx,row:e})}}],rows:nS(nv),meta:n_,refetch:nb,containerHeight:"calc(100% - 32px)",columnVisibilityModel:{manager:H,"location-admin-customer":V,location:!V,customer:H,customerManager:H,acceptSupplier:Y,offeredSupplier:Y,quotations:H,received:!B,range:H,actions:H,tags:H}})]})]})};nc.defaultProps={initialFilters:{},title:"",subtitle:""},nc.propTypes={initialFilters:S().object,title:S().string,subtitle:S().string};var nl={id:null,q:null,startDate:null,endDate:null,status:[],customerId:null,supplierId:null,userId:null,isChangedStatusSelect:!1,customerManager:null,filterType:"quotes_table"},nd=function(){var n,e=(0,Z.q)().hasUserModule,t=(0,j.x)(),s=t.user,u=t.hasRole,c=(0,i.useRouter)().query,l=e("quotes"),d=u("customer_user"),m=u("tenant_user");if(!s)return o().push("/account/sign-in"),null;if(!l&&(d||m))throw Error("Permission denied");return(0,r.jsx)(a.Z,{children:(0,r.jsx)(nc,{title:null!==(n=null==c?void 0:c.title)&&void 0!==n?n:"Quotes",subtitle:null==c?void 0:c.subtitle,initialFilters:nl})})};nd.getLayout=function(n){return n};var nm=nd},57460:function(n,e){var t,r,i,o; /* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/ o=function n(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},t=!e.document&&!!e.postMessage,r=t&&/blob:/i.test((e.location||{}).protocol),i={},o=0,a={parse:function(t,r){var s=(r=r||{}).dynamicTyping||!1;if(I(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!I(r.transform)&&r.transform,r.worker&&a.WORKERS_SUPPORTED){var u=function(){if(!a.WORKERS_SUPPORTED)return!1;var t,r,s=(t=e.URL||e.webkitURL||null,r=n.toString(),a.BLOB_URL||(a.BLOB_URL=t.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),u=new e.Worker(s);return u.onmessage=g,u.id=o++,i[u.id]=u}();return u.userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=I(r.step),r.chunk=I(r.chunk),r.complete=I(r.complete),r.error=I(r.error),delete r.worker,void u.postMessage({input:t,config:r,workerId:u.id})}var f=null;return a.NODE_STREAM_INPUT,"string"==typeof t?f=r.download?new c(r):new d(r):!0===t.readable&&I(t.read)&&I(t.on)?f=new m(r):(e.File&&t instanceof File||t instanceof Object)&&(f=new l(r)),f.stream(t)},unparse:function(n,e){var t=!1,r=!0,i=",",o="\r\n",s='"',u=s+s,c=!1,l=null,d=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter(function(n){return -1!==e.delimiter.indexOf(n)}).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(t=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+s),"boolean"==typeof e.escapeFormulae&&(d=e.escapeFormulae)}}();var m=RegExp(p(s),"g");if("string"==typeof n&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return h(null,n,c);if("object"==typeof n[0])return h(l||f(n[0]),n,c)}else if("object"==typeof n)return"string"==typeof n.data&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:f(n.data[0])),Array.isArray(n.data[0])||"object"==typeof n.data[0]||(n.data=[n.data])),h(n.fields||[],n.data||[],c);throw Error("Unable to serialize unrecognized input");function f(n){if("object"!=typeof n)return[];var e=[];for(var t in n)e.push(t);return e}function h(n,e,t){var a="";"string"==typeof n&&(n=JSON.parse(n)),"string"==typeof e&&(e=JSON.parse(e));var s=Array.isArray(n)&&0<n.length,u=!Array.isArray(e[0]);if(s&&r){for(var c=0;c<n.length;c++)0<c&&(a+=i),a+=g(n[c],c);0<e.length&&(a+=o)}for(var l=0;l<e.length;l++){var d=s?n.length:e[l].length,m=!1,f=s?0===Object.keys(e[l]).length:0===e[l].length;if(t&&!s&&(m="greedy"===t?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===t&&s){for(var p=[],h=0;h<d;h++){var v=u?n[h]:h;p.push(e[l][v])}m=""===p.join("").trim()}if(!m){for(var _=0;_<d;_++){0<_&&!f&&(a+=i);var y=s&&u?n[_]:_;a+=g(e[l][y],_)}l<e.length-1&&(!t||0<d&&!f)&&(a+=o)}}return a}function g(n,e){if(null==n)return"";if(n.constructor===Date)return JSON.stringify(n).slice(1,25);!0===d&&"string"==typeof n&&null!==n.match(/^[=+\-@].*$/)&&(n="'"+n);var r=n.toString().replace(m,u);return"boolean"==typeof t&&t||"function"==typeof t&&t(n,e)||Array.isArray(t)&&t[e]||function(n,e){for(var t=0;t<e.length;t++)if(-1<n.indexOf(e[t]))return!0;return!1}(r,a.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?s+r+s:r}}};if(a.RECORD_SEP="\x1e",a.UNIT_SEP="\x1f",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!t&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=h,a.ParserHandle=f,a.NetworkStreamer=c,a.FileStreamer=l,a.StringStreamer=d,a.ReadableStreamStreamer=m,e.jQuery){var s=e.jQuery;s.fn.parse=function(n){var t=n.config||{},r=[];return this.each(function(n){if(!("INPUT"===s(this).prop("tagName").toUpperCase()&&"file"===s(this).attr("type").toLowerCase()&&e.FileReader)||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},t)})}),i(),this;function i(){if(0!==r.length){var e,t,i,u,c=r[0];if(I(n.before)){var l=n.before(c.file,c.inputElem);if("object"==typeof l){if("abort"===l.action)return e="AbortError",t=c.file,i=c.inputElem,u=l.reason,void(I(n.error)&&n.error({name:e},t,i,u));if("skip"===l.action)return void o();"object"==typeof l.config&&(c.instanceConfig=s.extend(c.instanceConfig,l.config))}else if("skip"===l)return void o()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(n){I(d)&&d(n,c.file,c.inputElem),o()},a.parse(c.file,c.instanceConfig)}else I(n.complete)&&n.complete()}function o(){r.splice(0,1),i()}}}function u(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var e=y(n);e.chunkSize=parseInt(e.chunkSize),n.step||n.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}).call(this,n),this.parseChunk=function(n,t){if(this.isFirstChunk&&I(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);void 0!==i&&(n=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=s.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),s&&s.data&&(this._rowCount+=s.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:s,workerId:a.WORKER_ID,finished:c});else if(I(this._config.chunk)&&!t){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!c||!I(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(n){I(this._config.error)?this._config.error(n):r&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:n,finished:!1})}}function c(n){var e;(n=n||{}).chunkSize||(n.chunkSize=a.RemoteChunkSize),u.call(this,n),this._nextChunk=t?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),t||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!t),this._config.downloadRequestHeaders){var n=this._config.downloadRequestHeaders;for(var r in n)e.setRequestHeader(r,n[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(o){this._chunkError(o.message)}t&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){var n,t;4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(t=(n=e).getResponseHeader("Content-Range"))?-1:parseInt(t.substring(t.lastIndexOf("/")+1))),this.parseChunk(e.responseText)))},this._chunkError=function(n){var t=e.statusText||n;this._sendError(Error(t))}}function l(n){(n=n||{}).chunkSize||(n.chunkSize=a.LocalChunkSize),u.call(this,n);var e,t,r="undefined"!=typeof FileReader;this.stream=function(n){this._input=n,t=n.slice||n.webkitSlice||n.mozSlice,r?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);n=t.call(n,this._start,i)}var o=e.readAsText(n,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(e.error)}}function d(n){var e;u.call(this,n=n||{}),this.stream=function(n){return e=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n,t=this._config.chunkSize;return t?(n=e.substring(0,t),e=e.substring(t)):(n=e,e=""),this._finished=!e,this.parseChunk(n)}}}function m(n){u.call(this,n=n||{});var e=[],t=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):t=!0},this._streamData=b(function(n){try{e.push("string"==typeof n?n:n.toString(this._config.encoding)),t&&(t=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(r){this._streamError(r)}},this),this._streamError=b(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=b(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(n){var e,t,r,i=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,o=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,s=this,u=0,c=0,l=!1,d=!1,m=[],f={data:[],errors:[],meta:{}};if(I(n.step)){var g=n.step;n.step=function(e){if(f=e,b())_();else{if(_(),0===f.data.length)return;u+=e.data.length,n.preview&&u>n.preview?t.abort():(f.data=f.data[0],g(f,s))}}}function v(e){return"greedy"===n.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function _(){if(f&&r&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),n.skipEmptyLines)for(var e=0;e<f.data.length;e++)v(f.data[e])&&f.data.splice(e--,1);return b()&&function(){if(f){if(Array.isArray(f.data[0])){for(var e=0;b()&&e<f.data.length;e++)f.data[e].forEach(t);f.data.splice(0,1)}else f.data.forEach(t)}function t(e,t){I(n.transformHeader)&&(e=n.transformHeader(e,t)),m.push(e)}}(),function(){if(!f||!n.header&&!n.dynamicTyping&&!n.transform)return f;function e(e,t){var r,i=n.header?{}:[];for(r=0;r<e.length;r++){var o=r,a=e[r];n.header&&(o=r>=m.length?"__parsed_extra":m[r]),n.transform&&(a=n.transform(a,o)),a=$(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return n.header&&(r>m.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+r,c+t):r<m.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+r,c+t)),i}var t=1;return!f.data.length||Array.isArray(f.data[0])?(f.data=f.data.map(e),t=f.data.length):f.data=e(f.data,0),n.header&&f.meta&&(f.meta.fields=m),c+=t,f}()}function b(){return n.header&&0===m.length}function $(e,t){return n.dynamicTypingFunction&&void 0===n.dynamicTyping[e]&&(n.dynamicTyping[e]=n.dynamicTypingFunction(e)),!0===(n.dynamicTyping[e]||n.dynamicTyping)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(!function(n){if(i.test(n)){var e=parseFloat(n);if(-9007199254740992<e&&e<9007199254740992)return!0}return!1}(t)?o.test(t)?new Date(t):""===t?null:t:parseFloat(t)):t}function x(n,e,t,r){var i={type:n,code:e,message:t};void 0!==r&&(i.row=r),f.errors.push(i)}this.parse=function(i,o,s){var u=n.quoteChar||'"';if(n.newline||(n.newline=function(n,e){n=n.substring(0,1048576);var t=RegExp(p(e)+"([^]*?)"+p(e),"gm"),r=(n=n.replace(t,"")).split("\r"),i=n.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var a=0,s=0;s<r.length;s++)"\n"===r[s][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(i,u)),r=!1,n.delimiter)I(n.delimiter)&&(n.delimiter=n.delimiter(i),f.meta.delimiter=n.delimiter);else{var c=function(e,t,r,i,o){var s,u,c,l;o=o||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var d=0;d<o.length;d++){var m=o[d],f=0,p=0,g=0;c=void 0;for(var _=new h({comments:i,delimiter:m,newline:t,preview:10}).parse(e),y=0;y<_.data.length;y++)if(r&&v(_.data[y]))g++;else{var b=_.data[y].length;p+=b,void 0!==c?0<b&&(f+=Math.abs(b-c),c=b):c=b}0<_.data.length&&(p/=_.data.length-g),(void 0===u||f<=u)&&(void 0===l||l<p)&&1.99<p&&(u=f,s=m,l=p)}return{successful:!!(n.delimiter=s),bestDelimiter:s}}(i,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess);c.successful?n.delimiter=c.bestDelimiter:(r=!0,n.delimiter=a.DefaultDelimiter),f.meta.delimiter=n.delimiter}var d=y(n);return n.preview&&n.header&&d.preview++,e=i,f=(t=new h(d)).parse(e,o,s),_(),l?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,t.abort(),e=I(n.chunk)?"":e.substring(t.getCharIndex())},this.resume=function(){s.streamer._halted?(l=!1,s.streamer.parseChunk(e,!0)):setTimeout(s.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,t.abort(),f.meta.aborted=!0,I(n.complete)&&n.complete(f),e=""}}function p(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(n){var e,t=(n=n||{}).delimiter,r=n.newline,i=n.comments,o=n.step,s=n.preview,u=n.fastMode,c=e=void 0===n.quoteChar?'"':n.quoteChar;if(void 0!==n.escapeChar&&(c=n.escapeChar),("string"!=typeof t||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),i===t)throw Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var l=0,d=!1;this.parse=function(n,a,m){if("string"!=typeof n)throw Error("Input must be a string");var f=n.length,h=t.length,g=r.length,v=i.length,_=I(o),y=[],b=[],$=[],x=l=0;if(!n)return E();if(u||!1!==u&&-1===n.indexOf(e)){for(var q=n.split(r),S=0;S<q.length;S++){if(l+=($=q[S]).length,S!==q.length-1)l+=r.length;else if(m)break;if(!i||$.substring(0,v)!==i){if(_){if(y=[],P($.split(t)),U(),d)return E()}else P($.split(t));if(s&&s<=S)return y=y.slice(0,s),E(!0)}}return E()}for(var Z=n.indexOf(t,l),j=n.indexOf(r,l),k=RegExp(p(c)+p(e),"g"),C=n.indexOf(e,l);;)if(n[l]!==e){if(i&&0===$.length&&n.substring(l,l+v)===i){if(-1===j)return E();l=j+g,j=n.indexOf(r,l),Z=n.indexOf(t,l)}else{if(-1!==Z&&(Z<j||-1===j)){if(!(Z<C)){$.push(n.substring(l,Z)),l=Z+h,Z=n.indexOf(t,l);continue}var w=M(Z,C,j);if(w&&void 0!==w.nextDelim){Z=w.nextDelim,C=w.quoteSearch,$.push(n.substring(l,Z)),l=Z+h,Z=n.indexOf(t,l);continue}}if(-1===j)break;if($.push(n.substring(l,j)),F(j+g),_&&(U(),d))return E();if(s&&y.length>=s)return E(!0)}}else for(C=l,l++;;){if(-1===(C=n.indexOf(e,C+1)))return m||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:l}),D();if(C===f-1)return D(n.substring(l,C).replace(k,e));if(e!==c||n[C+1]!==c){if(e===c||0===C||n[C-1]!==c){-1!==Z&&Z<C+1&&(Z=n.indexOf(t,C+1)),-1!==j&&j<C+1&&(j=n.indexOf(r,C+1));var A=R(-1===j?Z:Math.min(Z,j));if(n[C+1+A]===t){$.push(n.substring(l,C).replace(k,e)),n[l=C+1+A+h]!==e&&(C=n.indexOf(e,l)),Z=n.indexOf(t,l),j=n.indexOf(r,l);break}var T=R(j);if(n.substring(C+1+T,C+1+T+g)===r){if($.push(n.substring(l,C).replace(k,e)),F(C+1+T+g),Z=n.indexOf(t,l),C=n.indexOf(e,l),_&&(U(),d))return E();if(s&&y.length>=s)return E(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:l}),C++}}else C++}return D();function P(n){y.push(n),x=l}function R(e){var t=0;if(-1!==e){var r=n.substring(C+1,e);r&&""===r.trim()&&(t=r.length)}return t}function D(e){return m||(void 0===e&&(e=n.substring(l)),$.push(e),l=f,P($),_&&U()),E()}function F(e){l=e,P($),$=[],j=n.indexOf(r,l)}function E(n){return{data:y,errors:b,meta:{delimiter:t,linebreak:r,aborted:d,truncated:!!n,cursor:x+(a||0)}}}function U(){o(E()),y=[],b=[]}function M(r,i,o){var a={nextDelim:void 0,quoteSearch:void 0},s=n.indexOf(e,i+1);if(i<r&&r<s&&(s<o||-1===o)){var u=n.indexOf(t,s);if(-1===u)return a;s<u&&(s=n.indexOf(e,s+1)),a=M(u,s,o)}else a={nextDelim:r,quoteSearch:i};return a}},this.abort=function(){d=!0},this.getCharIndex=function(){return l}}function g(n){var e=n.data,t=i[e.workerId],r=!1;if(e.error)t.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(I(t.userStep)){for(var a=0;a<e.results.data.length&&(t.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},o),!r);a++);delete e.results}else I(t.userChunk)&&(t.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&v(e.workerId,e.results)}function v(n,e){var t=i[n];I(t.userComplete)&&t.userComplete(e),t.terminate(),delete i[n]}function _(){throw Error("Not implemented.")}function y(n){if("object"!=typeof n||null===n)return n;var e=Array.isArray(n)?[]:{};for(var t in n)e[t]=y(n[t]);return e}function b(n,e){return function(){n.apply(e,arguments)}}function I(n){return"function"==typeof n}return r&&(e.onmessage=function(n){var t=n.data;if(void 0===a.WORKER_ID&&t&&(a.WORKER_ID=t.workerId),"string"==typeof t.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(t.input,t.config),finished:!0});else if(e.File&&t.input instanceof File||t.input instanceof Object){var r=a.parse(t.input,t.config);r&&e.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(u.prototype)).constructor=c,(l.prototype=Object.create(u.prototype)).constructor=l,(d.prototype=Object.create(d.prototype)).constructor=d,(m.prototype=Object.create(u.prototype)).constructor=m,a},void 0!==(i=o.apply(e,[]))&&(n.exports=i)},40872:function(n,e,t){"use strict";function r(){return(r=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function i(){return r.apply(this,arguments)}t.d(e,{Z:function(){return i}})}},function(n){n.O(0,[3662,2283,212,619,8890,2583,4135,8579,6043,1564,4244,3911,3776,2329,778,4046,1023,9957,1870,8062,2429,5497,4061,8324,8344,8849,9774,2888,179],function(){return n(n.s=56529)}),_N_E=n.O()}]);